!function(e){var t=e.createElement("style"),i="#fyu_cover,.fyu_clickndrag,.fyu_wrapper,.fyubtn{font-family:Lato,HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-weight:400;font-size:12px}.fyu_fs{overflow:hidden!important}.fyu_vertical{min-width:160px;min-height:284px;max-width:320px;max-height:568px}.fyu_horizontal{min-width:284px;min-height:160px;max-width:568px;max-height:320px}.fyu_wrapper{height:100%;padding:0;margin:0;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-touch-callout:none;tap-highlight-color:transparent}.fyu_wrapper>div{width:100%;height:100%;position:relative}.fyu_horizontal .fyu_wrapper>div{height:0;padding-bottom:56.25%}body .fyu_nomax{max-width:none;max-height:none}.fyu_vertical .fyu_wrapper>div{height:0;padding-bottom:177%}.fyu_wrapper a{text-decoration:none;color:#fff}.fyv .plBtn{cursor:pointer;display:block;width:460px;height:460px;z-index:999;background:url(https://i.fyu.se/assets/viewer/arr-h.png) 50% no-repeat;position:absolute;left:50%;top:50%;margin-left:-230px;margin-top:-230px}.fyv.vert .plBtn{background:url(https://i.fyu.se/assets/viewer/arr-v.png) 50% no-repeat}.fyv .plBtn:hover{opacity:.85}.fyv img{display:block;margin:0 auto}.fyv.horiz{cursor:col-resize;cursor:url(https://i.fyu.se/assets/viewer/cursor_h.gif) 24 16,col-resize}.fyv.vert{cursor:row-resize;cursor:url(https://i.fyu.se/assets/viewer/cursor_v.gif) 16 24,row-resize}.fyv{cursor:default}.fygrab{cursor:move;cursor:grab;cursor:-moz-grab;cursor:-webkit-grab}.fygrab:active,.fyv.fyuse.fygrab{cursor:grabbing;cursor:-moz-grabbing;cursor:-webkit-grabbing}.fyv.horiz.fyvhover{cursor:col-resize;cursor:url(https://i.fyu.se/assets/viewer/cursor_h_hover@0.5x.png) 24 16,col-resize}.fyv.vert.fyvhover{cursor:row-resize;cursor:url(https://i.fyu.se/assets/viewer/cursor_v_hover@0.5x.png) 16 24,row-resize}.fyv.fyuse.horiz{cursor:col-resize;cursor:url(https://i.fyu.se/assets/viewer/cursor_hgrab.gif) 24 16,col-resize}.fyv.fyuse.vert{cursor:row-resize;cursor:url(https://i.fyu.se/assets/viewer/cursor_vgrab.gif) 16 24,row-resize}.fyv{overflow:hidden;display:block;position:relative;height:100%;width:100%;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#fyu_cover{opacity:0;position:fixed;z-index:9999999999;width:100%;height:100%;transition:opacity .27s .08s;-webkit-transition:opacity .27s .08s;background:rgba(0,0,0,.81)}#fyu_cover,.fyu_clayer{left:0;top:0;right:0;bottom:0}.fyu_clayer{position:absolute;z-index:1}.fyul{border:6px solid rgba(99,99,99,.4);border-top:6px solid hsla(0,0%,100%,.6);border-radius:100%;height:50px;width:50px;-webkit-animation:fyua .8s infinite linear;animation:fyua .8s infinite linear;background:transparent;position:absolute;top:50%;left:50%;margin-top:-30px;margin-left:-30px;z-index:8}@-webkit-keyframes fyua{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes fyua{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.fyu_wrapper canvas{position:absolute;left:0;top:0;-webkit-tap-highlight-color:rgba(0,0,0,0);tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.fyv:hover .fyu_clickndrag{opacity:0}.fyu_clickndrag{-webkit-transition:opacity .3s;-moz-transition:opacity .3s;transition:opacity .3s;opacity:.9;width:64px;height:32px;position:absolute;bottom:10px;left:10px;background:url(https://i.fyu.se/assets/viewer/icn_360o.png) 50% 50% no-repeat;text-indent:-9999px;z-index:4}.fyu_symbol{background:url(https://fyu.se/assets/symbol.png) 0 0 no-repeat;width:100px;height:100px;display:block;position:absolute;left:-22px;top:-22px;z-index:101;background-size:48px;cursor:auto;background-position:37px 37px;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}a.fyu_symbol{cursor:pointer}.fyv.fyuse{cursor:default;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.fyu_wrapper .ldr2{overflow:visible}body .ldr2.stopped i,body .ldr2.stopped span,body .ldr.stopped,body .stopped .ldr2 i,body .stopped .ldr2 span{opacity:0;-webkit-animation-state:paused}.fyu_wrapper .clear{clear:both!important}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg)}to{-moz-transform:rotate(1turn)}}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}.fyu_wrapper #svg{-webkit-transform:rotate(-92deg);-moz-transform:rotate(-92deg);-ms-transform:rotate(-92deg);transform:rotate(-92deg);transition:opacity .2s}.fyu_wrapper #svg circle{stroke-dashoffset:0;stroke:rgba(90,90,90,.6);stroke-width:8px}.fyu_wrapper #svg #bar{stroke:#d84a3a}.fyu_wrapper #svg.fade{opacity:0}.fyu_controls{position:absolute;right:8px;bottom:6px;height:40px;opacity:0;-webkit-transition:opacity .38s;transition:opacity .38s}.fyu_controls a{height:36px;width:36px;display:block;border-radius:20px;background:rgba(0,0,0,.62);float:left;margin-right:5px;text-align:center;line-height:37px;font-size:8px;font-weight:700;cursor:pointer;opacity:.78}.fyu_controls a,.fyu_controls a:hover{color:#fff;text-decoration:none}.fyu_controls a.x2{background:rgba(0,0,0,.62) url(https://i.fyu.se/assets/viewer/x2.png) 1px 6px no-repeat;background-size:32px}.fyu_controls .pause.paused span{display:none}.fyu_controls .play>span{margin:3px 5px}.fyu_controls .play span span{width:3px;height:13px;background:#f6f6f6;display:block;float:left;margin-right:3px}.fyu_controls .play .pause.paused{position:absolute;top:6px;left:10px;width:0;height:0;border-style:solid;border-width:9px 0 9px 11px;border-color:transparent transparent transparent #fff}.fyu_controls .play .pause.playing{left:9px;display:block;height:15px;width:20px;position:absolute;top:9px;left:8px}.fyu_desc{position:absolute;left:0;top:0;right:0;height:31px;padding:20px 74px;color:#f7f7f7;background:rgba(0,0,0,.65);font-weight:700;font-size:12px;opacity:0;visibility:hidden;-webkit-transition:opacity .3s;transition:opacity .3s}.fyu_dschldr:hover .fyu_desc{opacity:1;visibility:visible}.fyu_dschldr{cursor:auto}.fyuse_tag{font-size:16px;font-weight:400;background:rgba(32,32,32,.88);border-radius:2px;color:#fff;position:absolute;z-index:98;width:auto;height:auto;text-overflow:ellipsis;display:none;padding:0;line-height:1;max-width:180px;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.fyuse_tag:before{border:solid;border-color:rgba(32,32,32,.89) transparent;border-width:0 6px 6px;top:-6px;content:'';left:calc(50% - 6px);position:absolute;z-index:99}.fyuse_tag span{display:none}.fyuse_tag a{color:#fff;display:block;cursor:pointer;text-shadow:none;text-decoration:none!important;text-overflow:ellipsis;padding:5px 13px 6px}.fyuse_tag h6{font-size:1em;margin:6px 4px}.fyuse_tag_user a:hover{text-decoration:none!important}.fyuse.fyv .fyu_actions{display:none!important}.fyu_actions{height:40px;width:auto;position:absolute;bottom:10px;right:10px;opacity:0;z-index:5;display:none;-webkit-transition:opacity .25s;-moz-transition:opacity .25s;transition:opacity .25s}.fyhi .fyu_actions{opacity:0}.fyu_actions.top_right{top:10px;bottom:auto}.fyu_actions.top_left{top:10px;left:10px;right:auto;bottom:auto}.fyu_actions.bottom_left{left:10px;right:auto}.fyu_actions.bottom_right.f_act_fs_tag{bottom:55px}.fyu_actions.f_act_vert{height:auto;width:40px}.fyu_actions.f_act_vert .fyubtn+.fyubtn{margin-left:0;margin-top:6px}.fyubtn{display:inline-block;width:40px;height:40px;text-align:center;opacity:1;cursor:pointer;text-indent:-9999px;background:url(https://i.fyu.se/assets/viewer/action-icons.png) 0 0 no-repeat}.fyubtn.zoom-in{background-position:-82px 0}.fyubtn.x2{background-position:-246px 0}#fyu_cover .fyubtn.x2{background-position:-164px 0}.fyubtn.tags{background-position:100%;opacity:.64}.fyubtn+.fyubtn{margin-left:6px}.fyv:hover .fyu_actions{opacity:1}.fyu_close{position:fixed;right:6px;top:6px;display:block;text-align:center;z-index:100;cursor:pointer;text-decoration:none;text-shadow:none!important;text-indent:-9999px;width:38px;height:38px;opacity:.82}.fyu_close:hover{opacity:1}.fyu_close:after,.fyu_close:before{position:absolute;top:9px;left:18px;content:' ';height:19px;width:3px;background-color:#fc3549}.fyu_close:before{-ms-transform:rotate(45deg);transform:rotate(45deg);-webkit-transform:rotate(45deg)}.fyu_close:after{-ms-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transform:rotate(-45deg)}.fyu-renderer{position:absolute!important;background:#222;overflow:hidden}#fyu_cover .fymob .fyu-renderer,#fyu_cover .fymob.fyv{overflow:visible}.fyu_visimg{position:absolute;left:0;cursor:-webkit-zoom-in;cursor:zoom-in;z-index:8;top:0;background-size:120%;background-repeat:no-repeat;background:transparent;background-position:50% 50%}.fyu_visimg,.fyu_visimg img{display:block;width:100%;height:100%}.fyu_visimg img{background:rgba(0,0,0,.8);object-fit:contain;transition:opacity .5s}.fy_pano{text-align:center;min-width:98px;text-shadow:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:7;color:#fff;font-family:Arial,sans-serif;padding:5px 17px;font-size:12px;background:rgba(0,0,0,.5);cursor:pointer;border:1px solid #666;display:block;position:absolute;bottom:15px;left:15px}.fyuse .fy_pano,.fyuse_tag2{display:none}.fyuse_tag2{font-size:14px;font-weight:400;padding:5px;background:hsla(0,0%,8%,.92);border:1px solid #666;color:#eee;position:absolute;min-height:28px;z-index:98;text-shadow:none;height:auto;text-overflow:ellipsis;padding:6px 52px 6px 18px;line-height:1;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-left:-65px;margin-top:-42px;max-width:500px;box-sizing:content-box}.fyuse_tag2 h6{margin:0;max-width:116px;font-size:16px;padding-top:5px;font-weight:400}.fyuse_tag2 p{max-width:116px;margin:5px 0;font-size:14px;color:#999}.fyuse_tag2 img{max-width:150px;max-height:220px;image-rendering:-webkit-optimize-contrast}.fyuse_tag2 span{font-family:Arial,sans-serif;border-radius:500px;background:#fff;color:#050505;line-height:25px;position:absolute;top:50%;margin-top:-14px;right:15px;padding:0;width:26px;height:26px;text-align:center;font-weight:700;font-size:15px;box-sizing:content-box}.fyuse_tag3{background:transparent;border-radius:26px;border:2px solid #fff;display:none;height:26px;width:26px;z-index:98}.fyuse_tag3,.fyuse_tag3:before{font-size:0;position:absolute;box-shadow:0 0 5px #000}.fyuse_tag3:before{content:' ';z-index:-1;border-radius:26px;top:4px;left:4px;right:4px;bottom:4px;background:#fff}.fyuse_tag3 img{display:none}.fyuse_tag3 a,.fyuse_tag3 h6{display:block;height:100%;width:100%}.fyuse_tag_tg1,.fyuse_tag_tg2{width:48px;height:48px;margin-top:-44px;margin-left:-18px;font-size:0;text-indent:-9999px;position:absolute;z-index:98;display:none;background:url(https://i.fyu.se/0/sdk/web/tag-plus.svg) no-repeat 50%;background-size:100%;cursor:pointer;transition:-webkit-transform .3s ease;transition:transform .3s ease;transition:transform .3s ease,-webkit-transform .3s ease;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);-webkit-animation:fy_a_sc .6s ease-in-out .1s 1;animation:fy_a_sc .6s ease-in-out .1s 1}.fyuse_tag_tg2{background:url(https://i.fyu.se/0/sdk/web/tag-dmg.svg) no-repeat 50%;background-size:100%}.fyuse_tag_tg1 h6,.fyuse_tag_tg2 h6{width:100%;height:100%}.fymob .fyuse_tag_tg1,.fymob .fyuse_tag_tg2{width:60px;height:60px;margin-top:-52px;margin-left:-24px}.fy_cpt{position:absolute;left:0;right:0;bottom:0;height:34px;color:#fff;line-height:34px;text-align:center;background:#3b5fff;font-size:13px;z-index:5;text-shadow:0 0 1px #111;opacity:0;transition:all .24s;-webkit-transform:translateY(40px);-ms-transform:translateY(40px);transform:translateY(40px)}.fy_cpt.fy_dmg{background:#db2532}@-webkit-keyframes fy_a_sc{0%{-webkit-transform:scale(1.46);transform:scale(1.46)}50%{-webkit-transform:scale(.7);transform:scale(.7)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes fy_a_sc{0%{-webkit-transform:scale(1.46);transform:scale(1.46)}50%{-webkit-transform:scale(.7);transform:scale(.7)}to{-webkit-transform:scale(1);transform:scale(1)}}.fyu-image-wrapper{z-index:1;background:transparent;-webkit-transform-origin:0 0 0;-ms-transform-origin:0 0 0;transform-origin:0 0 0}.fyu-image-wrapper,.fyu-thumb{-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none;position:absolute;left:0;top:0;width:100%;height:100%}.fyu-thumb{z-index:50;right:0;bottom:0;outline:0;pointer-events:none;opacity:0;transition:opacity .28s ease-in-out;-moz-transition:opacity .28s ease-in-out;-webkit-transition:opacity .28s ease-in-out}.fyu-canvas,.fyu-canvas-blur{position:absolute;background:transparent;left:0;top:0;z-index:2;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none}.fyu-canvas-cover{z-index:3;opacity:0;transition:opacity .28s ease-in-out;-moz-transition:opacity .28s ease-in-out;-webkit-transition:opacity .28s ease-in-out;width:100%}.fyu-canvas-cover.disabled{z-index:0}.fyu-opacity-1{opacity:1!important}";if(t.setAttribute("type","text/css"),t.styleSheet)t.styleSheet.cssText=i;else{var n=document.createTextNode(i);t.appendChild(n)}!function e(t,i,n){function r(a,o){if(!i[a]){if(!t[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var h=i[a]={exports:{}};t[a][0].call(h.exports,function(e){var i=t[a][1][e];return r(i?i:e)},h,h.exports,e,t,i,n)}return i[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("../utils/history"),o=n(a),l=e("../utils/dom"),u=(n(l),function(){function e(t){r(this,e),this.viewer=t,this.el=null,this.val=0,this._createEl(this.viewer)}return s(e,[{key:"_createEl",value:function(e){var t=document.createElement("a"),i="https://i.fyu.se/0/sv4.png",n="cursor:pointer;-ms-transform:scale(.6);-webkit-transform:scale(.6);transform:scale(.65);position:absolute;left:-24px;top:-24px;z-index:501;width:90px;height:90px;";e.config.logo&&("string"==typeof e.config.logo&&(i=e.config.logo),n+="background:url("+i+") no-repeat 34px 34px;background-size:52px;"),t.style.cssText=n,o["default"].avail(e.config.belongs)&&this.makeBack(e,t,function(){var t=o["default"].back(e.config.belongs,e.fid,e.el);e._updateViewer(t.viewer,e.el.parentNode,e,null,!0),t.viewer.onviewport=!0});var r=document.createElement("div");r.style.cssText="transform:translate3d(0,0,0);height:3px;left:0;position:absolute;text-align:center;top:0;width:100%;z-index:999;",r.innerHTML='<span style="background:#fc3549;display:block;height:100%;margin:0 auto;width:0;"></span>',e.el.getElementsByClassName("fyu-renderer")[0].parentNode.appendChild(r),this.viewer.config.nologo||(t["class"]="fyu_ldr",(e.config.embed||e.config.jsembed)&&(window.location.href.indexOf("hw=1")!==-1?t.href="https://fyu.se":t.href="https://fyu.se/v/"+e.fid,t.setAttribute("target","_blank")),window.location.href.indexOf("nologo")!==-1&&(t.style.opacity="0"),e.renderer&&e.config.inlineBtn?e.renderer.el.appendChild(t):e.el.appendChild(t),this.logo=t),this.el=r.getElementsByTagName("span")[0]}},{key:"makeBack",value:function(e,t,i){var n=null;if(t)n=t;else{var r="cursor:pointer;-ms-transform:scale(.6);-webkit-transform:scale(.6);transform:scale(.65);position:absolute;left:-24px;top:-24px;z-index:501;width:90px;height:90px;";n=document.createElement("a"),n.style.cssText=r}n.onclick=function(e){e.preventDefault(),e.stopPropagation(),i&&i(n)},n.style.cssText+=';background: url("https://fyu.se/assets/back.png") 34px 34px / 52px no-repeat;',e.renderer&&e.config.inlineBtn?e.renderer.el.appendChild(n):e.el.appendChild(n)}},{key:"setPercentage",value:function(e){var t=this;this.el&&e>this.val+1&&window.requestAnimFrame(function(){t.el&&(t.el.style.width=e+"%"),t.val=e})}},{key:"done",value:function(e){var t=this,i=function(){t.viewer=null,t.el&&t.el.parentNode&&(t.el.parentNode.parentNode.removeChild(t.el.parentNode),t.el=null)};e?i():setTimeout(i,120)}},{key:"destroy",value:function(){this.logo&&this.logo.parentNode.removeChild(this.logo),this.logo=null,this.done(!0)}},{key:"removeLogo",value:function(){this.logo&&(this.logo.parentNode.removeChild(this.logo),this.logo=null)}}]),e}());i["default"]=u},{"../utils/dom":8,"../utils/history":10}],2:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("../utils/dom"),o=n(a),l=function(){function e(t){r(this,e),this._createExternalLink2=function(e,t){var i,n,r=this,s={href:"#",target:"_blank"};return e.indexOf("fyu.se/v/")!==-1?(i="#",n=t,s.onclick=function(t){t.preventDefault(),r.viewer.update(r._getUidFromUrl(e))}):(i=e,n=t?t:e),(0,o["default"])("a",s,n)},this.viewer=t,this.data=[],this.enabled=!1,this.container=null}return s(e,[{key:"getTags",value:function(){return this.data}},{key:"show",value:function(){return this.enabled||(this.applyStyle(),this.display(this.viewer.renderer.visible_frame)),this.enabled=!0,!1}},{key:"hide",value:function(){for(var e=this.data.length;e--;)this.data[e].elem.style.display="none";return this.enabled=!1,!1}},{key:"display",value:function(e){for(var t=this.data.length;t--;)this._showHideTag(this.data[t],e);return!1}},{key:"applyStyle",value:function(){if(!this.container)return!1;var e=this.viewer,t=e.renderer.transform,i=e.renderer.coords,n=e.renderer.canvasWidth>e.renderer.canvasHeight?960:960/e.config.fy.ratio2>>0,r=e.renderer.canvasWidth>e.renderer.canvasHeight?960/e.config.fy.ratio2>>0:960,s=t.scale*(this.viewer.renderer.canvasWidth/n),a="translate("+-t.scrollLeft+"px,"+-t.scrollTop+"px) scale("+s+")",o=this.container.style;return o.zIndex=4,o.overflow="hidden",o.position="absolute",o.width=n+"px",o.height=r+"px",o.top=i.top+"px",o.left=i.left+"px",o.msTransform=a,o.webkitTransform=a,o.transform=a,o.transformOrigin="0 0",o.webkitTransformOrigin="0 0",o.msTransformOrigin="0 0",!1}},{key:"create",value:function(e){var t=e.length,i=this.viewer;if(this.viewer.el){if(!this.container){var n=document.createElement("div");n.className="fyuse_tags_container",this.viewer.el.appendChild(n),this.container=n}for(;t-- >0;)this._processItem(e[t]);if(i["onload-tags"])for(var r=i["onload-tags"].length;r-- >0;)i["onload-tags"][r]&&i["onload-tags"][r](i),i["onload-tags"][r]=null}}},{key:"getCategory",value:function(){for(var e=this.viewer.config.tagCategory,t=[],i=this.data.length,n=void 0;i-- >0;)n=this.data[i],this.viewer.config.tagCategory&&n.Category?n.Category.indexOf(e)>=0&&t.push(n):t.push(n);return e||(e="All"),{category:e,tags:t}}},{key:"setCategory",value:function(e){""!==e&&"all"!==e&&"All"!==e||(e=null),this.viewer.config.tagCategory=e;for(var t=this.data.length,i=void 0;t-- >0;)i=this.data[t],this.viewer.config.tagCategory&&i.Category?i.Category.indexOf(e)>=0?i._hide=!1:i._hide=!0:i._hide=!1;this.enabled&&(this.applyStyle(),this.display(this.viewer.renderer.visible_frame))}},{key:"_showHideTag",value:function(e,t){if(e._hide)return void(e.elem.style.display="none");var i=e[t],n=e.elem.style,r=0,s=void 0,a=void 0,o=void 0,l=void 0,u=void 0;if(i){u=this.viewer.renderer.transform,o=this.viewer.renderer.canvasWidth*u.scale,l=this.viewer.renderer.canvasHeight*u.scale,n.display="block";var h=this.viewer.renderer.canvasWidth>this.viewer.renderer.canvasHeight?960:960/this.viewer.config.fy.ratio2>>0,c=u.scale*(this.viewer.renderer.canvasWidth/h);if(s=e.elem.offsetWidth*c,a=e.elem.offsetHeight*c,1===this.viewer.config.fy.m)switch(this.viewer.config.fy.r){case 1:2===e.s?(n.top=((1-i.Y)*l-a/-2-12)/l*100+"%",n.left=((1-i.X)*o-s/1.85)/o*100+"%"):(n.top=((1-i.Y)*l-a/2)/l*100+"%",n.left=((1-i.X)*o-s/1.5)/o*100+"%");break;case 0:2===e.s?(n.top=(i.Y*l-a/-2-12)/l*100+"%",n.left=(i.X*o-s/1.85)/o*100+"%"):(n.top=(i.Y*l+r)/l*100+"%",n.left=(i.X*o-s/2)/o*100+"%")}else switch(this.viewer.config.fy.r){case 2:n.top=(i.X*l+r)/l*100+"%",n.left=((1-i.Y)*o-s/2)/o*100+"%";break;case 0:n.top=(i.X*l+r)/l*100+"%",n.left=(i.Y*o-s/2)/o*100+"%"}}else n.display="none"}},{key:"_processItem",value:function(e){this.data.push(this._reOrderObj(e,this.data.length+1))}},{key:"_reOrderObj",value:function(e,t){var i={i:t,Version:e.Version,s:e.Style,Desc:e.Desc,Type:e.Type,Extra:e.Extra,Extra2:e.Extra2,Title:e.Title,Content:e.Content,Category:e.Category};return e.Trackers.forEach(function(e){i[e.F]={X:e.X,Y:e.Y}}),i.elem=this._renderTag(i),i}},{key:"_getUidFromUrl",value:function(e){return e.toLowerCase().replace("https://fyu.se/v/","").replace("http://fyu.se/v/","")}},{key:"_createExternalLink",value:function(e){return(0,o["default"])("a",{href:e,target:"_blank"},e)}},{key:"_createHashLink",value:function(e){var t="https://fyu.se/t/"+e.replace("#",""),i=e;return(0,o["default"])("a",{href:t,target:"_blank"},i)}},{key:"_renderTag",value:function(e){var t="fyuse_tag";this.viewer.config.tagStyle?this.viewer.config.tagStyle/1==this.viewer.config.tagStyle?t+=this.viewer.config.tagStyle:t=this.viewer.config.tagStyle+"":e.Title?(void 0==e.s&&("."==e.Title?e.s=3:e.s=2),t+=(e.s?e.s:"")+""):(e.s=0,e.Extra=e.Content,t=e.s?"fyuse_tag"+e.s:t);var i=void 0,n=void 0,r=(this.viewer.id,{"class":t});if(e.Category)for(var s=e.Category.length;s-- >0;)r["class"]+=" fyu_"+e.Category[s];if(i=(0,o["default"])("span",r,""),e.Title||e.Version){var a="<h6>";if(e.Type/1===3)a+=e.Content?'<a href="javascript: void(0)" onclick="fyu.o['+this.viewer.id+"].update('"+e.Content+"')\">"+(e.Title?e.Title:'<img src="https://fyu.se/thumb/'+e.Content.replace("https://fyu.se/v/","")+'" style="width:82px;height:45px" />')+"</a></h6>":e.Title+"</h6>";else if(e.Type/1<=1)if(e.Content)if(e.Content.indexOf(".jpg")>0||e.Content.indexOf(".png")>0){var l=e.Content;e.Content.indexOf("http")===-1&&(e.Title="view"),a+='<a href="javascript: void(0)" onclick="fyu.o['+this.viewer.id+"].showImage('"+l+"')\">"+(e.Title?e.Title:'<img src="'+l+'" style="width:82px;height:45px;" />')+"</a></h6>"}else a+='<a href="'+e.Content+'" target="_blank">'+(e.Title?e.Title:'<img src="'+e.Content+'" style="max-width:80px" />')+"</a></h6>";else 4===e.Version?a='<h6 onclick="fyu.o['+this.viewer.id+'].showCaption(this)">'+e.Title+"</h6>":a+=e.Title+"</h6>";else e.Type/1===2&&(a+='<a href="'+e.Content+'" target="_blank">'+(e.Title?e.Title:"")+"</a></h6>");e.Desc&&(a+="<p>"+e.Desc+"</p>",e.Content&&2===e.Type&&(a+='<img src="'+e.Content+'" />')),a+="<span>"+e.i+"</span>",i.innerHTML=a}else{if(0===e.Type){var u=document.createElement("div");u.innerHTML=fyu.utils.tagLinks(e.Desc),n=u.children[0]}else 1===e.Type?n=this._createHashLink(e.Desc):2===e.Type?n=this._createExternalLink(e.Desc):3==e.Type&&(n=this._createExternalLink2(e.Desc,e.Extra));n&&i.appendChild(n)}return this.container.appendChild(i),i}}]),e}();i["default"]=l},{"../utils/dom":8}],3:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var i=fyu.info.hasTouch;e.events.resize.push(s.bind(e)),i&&e.config.controls.hover&&(e.config.controls.hover=!1,e.config.controls.drag=!0),e.listeners=new o["default"](e,t,i)}function s(){var e=0;e=this.direction>1?this.el.offsetWidth:this.el.offsetHeight;var t=this.numframes/(.66*e);return t>.145&&(t=.145),t<.081&&(t=.081),this.listeners&&(this.listeners.mult=t),t}Object.defineProperty(i,"__esModule",{value:!0});var a=e("./events"),o=n(a);i["default"]=r},{"./events":4}],4:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){return 3===e.which&&2===e.button}function s(e,t){var i=e.el.getClientRects()[0],n=window.pageYOffset||document.documentElement.scrollTop,r=window.pageXOffset||document.documentElement.scrollLeft,s=t.pageX-i.left-r,a=t.pageY-i.top-n;return{x:s,y:i.height-a,mouseX:s,mouseY:a,rect:i}}function a(e){return e.mouseX<0||e.mouseY<0||e.mouseX>e.rect.width||e.mouseY>e.rect.height}function o(e,t){var i=t.pageX-e.pageX,n=t.pageY-e.pageY;return Math.sqrt(i*i+n*n)}function l(e,t){return e&&t&&e.length>=2&&t.length>=2?o(t[0],t[1])/o(e[0],e[1]):1}function u(e,t,i){return{x:Math.abs(t/e),y:Math.abs(i/e)}}function h(e,t){var i={},n=e.touches,r=n?n.length:0;if(r>0){var a=n[0];i.x=a.pageX,i.y=a.pageY,i.touches=n,i.fingers=r}else t?(i=s(t,e),i.hover=!0):(i.x=e.pageX,i.y=e.pageY);return i.target=e.target,i}function c(e,t){var i=this;switch(t.type){case"mousemove":case"pointermove":e._move(i,t);break;case"touchmove":e._moveTouch(i,t);break;case"touchstart":i.gt&&(clearTimeout(i.gt),i.gt=null),e._startTouch(i,t);break;case"mousedown":case"pointerdown":i.gt&&(clearTimeout(i.gt),i.gt=null),e._start(i,t);break;case"touchend":e._endTouch(i,t);break;case"mouseup":case"mouseout":case"pointerup":e._end(i,t);break;case"mouseover":e._startHover(i,t);break;case"orientationchange":case"resize":this._resize();break;case"wheel":case"DOMMouseScroll":case"mousewheel":e._wheel(i,t);break;case"contextmenu":e._prevent(t)}}function f(e){var t=document.createElement("span");e.config.controls.hover?t.innerHTML="Mouse over and move":t.innerHTML="Click and Drag",t.className="fyu_clickndrag",e.config.inlineBtn?e.renderer.el.appendChild(t):e.el.appendChild(t)}function d(e){var t=this;this.listeners.motionIntervalId=fyu.MotionHelper.start().schedule(function(i){if(!t.listeners.focus&&2===t.onviewport&&!t.listeners.nogyro){var n=-i.rotation_x,r=i.rotation_y;n===-1&&(n=-i.rx,r=i.ry);var s=54+t.numframesAvail/3,a=s/1.04719;a<75&&(a=75),a>160&&(a=160),n*=3.52*a,r*=3.52*a+12,t.listeners.x+=n,t.listeners.y+=r,e._dist(t,{x:n,y:r},!0),t.flintRendering()}})}function p(){var e=0;e=this.direction>1?this.el.offsetWidth:this.el.offsetHeight;var t=this.numframesAvail/(.66*e);return t>.1666&&(t=.1666),t<.0833333&&(t=.0833333),this.listeners&&(this.listeners.mult=t),t}Object.defineProperty(i,"__esModule",{value:!0});var m=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),g=function(){function e(t,i,r){n(this,e);var s=this;s._tm=function(e){s.enabled&&s.lock_action&&e.preventDefault()},document.addEventListener("touchmove",s._tm,{passive:!1}),this.enabled=!1,this.nogyro=!1,this.pointer=this._createPointer(i),this.scale={start:null,end:null,value:1,minValue:.1},this.dragX=0,this.dragY=0,this.canvasPan=!1,this.handleEvent=c.bind(t,this),t.config.controls.drag?this._setUpDrag(t,r):t.config.controls.hover&&this._setUpHover(t,r),this.enable=function(){this.enabled=!0,!t.config.nodrag&&t.config.motion&&fyu.utils.isMobile&&(fyu.MotionHelper?d.bind(t,this)():(!fyu.callbacks.motion&&(fyu.callbacks.motion=[]),fyu.callbacks.motion.push(d.bind(t,this))))},this.mult=p.bind(t)()}return m(e,[{key:"_setUpDrag",value:function(t,i){fyu.utils.isMobile?(this._start=this._startTouch,this._move=this._moveTouch,this._end=this._endTouch,e.add(t.el,"touchstart",this,!1)):(!window.PointerEvent||"ontouchstart"in document.documentElement?e.add(t.el,"mousedown",this,!1):(t.el.style.touchAction="none",e.add(t.el,"pointerdown",this,!1)),"ontouchstart"in document.documentElement&&e.add(t.el,"touchstart",this,!1)),e.add(t.el,"contextmenu",this,!1),i||t.config.nooverlay||this._addOverlayOn(t,"ondrag"),!i&&t.config.zoom?(e.add(t.el,"mousewheel",this,!1),e.add(t.el,"DOMMouseScroll",this,!1)):i&&t.config.zoom&&(t.listeners.scale={start:null,end:null,value:1,minValue:.1})}},{key:"_setUpHover",value:function(t,i){e.add(t.el,"mouseover",this,!1),this._start=this._startHover,this._move=this._moveHover,this._end=this._endHover,0!==t.direction.swipeX?t.el.className+=" horiz fyvhover":t.el.className+=" vert fyvhover"}},{key:"_start",value:function(t,i){return!(!this.enabled||this._isAction(i))&&(this._checkAutoPlay(),t.el.className+=" fyuse","pointerdown"===i.type?(e.add(document,"pointermove",this,!1),e.add(document,"pointerup",this,!1)):(e.add(document,"mousemove",this,!1),e.add(document,"mouseup",this,!1)),this.pointer.start=h(i),this.pointer.move=h(i),this._pan(t,i),this.swipe=!0,this.focus=!0,this.pointer.points=[],void this.pointer.addPoint())}},{key:"_move",value:function(e,t){var i=h(t);t.preventDefault(),t.stopPropagation(),this._pan(e,t,!0)||this._dist(e,i)&&(this.pointer.addPoint(),this._drag(e),e.flintRendering())}},{key:"_startDecelAnim",value:function(e){this.pointer.addPoint();var t=this.pointer.points[0],i=this.pointer.points[this.pointer.points.length-1],n=i.x-t.x,r=i.y-t.y,s=i.time-t.time,a=s/15;if(this.decVelX=n/a||0,this.decVelY=r/a||0,Math.abs(this.decVelX)>1||Math.abs(this.decVelY)>1){this.decelerating=!0;var o=this;requestAnimFrame(function(){o._stepDecelAnim(e)})}}},{key:"_stepDecelAnim",value:function(e){if(this.decelerating){var t=.712,i=.286;if(this.decVelX*=t,this.decVelY*=t,Math.abs(this.decVelX)>i||Math.abs(this.decVelY)>i){this._dist(e,{x:this.pointer.move.x+this.decVelX,y:this.pointer.move.y+this.decVelY}),e.flintRendering({swipe:!0});var n=this;requestAnimFrame(function(){n._stepDecelAnim(e)})}else this.decelerating=!1}}},{key:"_dbTap",value:function(e){this.enabled=!1;var t=e.renderer.transform.maxScale-e.renderer.transform.minScale,i=(e.renderer.transform.scale-e.renderer.transform.minScale)/t,n=this;i<.4?setTimeout(function(){var t=12,i=function i(){setTimeout(function(){e.renderer.zoom(e,17,{pageX:n.pointer.start.x,pageY:n.pointer.start.y},0);var r=e.renderer.transform.maxScale-e.renderer.transform.minScale,s=(e.renderer.transform.scale-e.renderer.transform.minScale)/r;0!==--t&&s<.53?i():n.enabled=!0},30)};i()},0):setTimeout(function(){var t=64,i=function i(){setTimeout(function(){e.renderer.zoom(e,-17,{pageX:n.pointer.start.x,pageY:n.pointer.start.y},0),e.renderer.transform.scale!=e.renderer.transform.minScale&&--t>0?i():n.enabled=!0},30)};i()},0)}},{key:"_end",value:function(t,i){if(this.focus=!1,this.canvasPan=!1,e.remove(document,"mouseup",this,!1),e.remove(document,"mousemove",this,!1),e.remove(document,"pointerup",this,!1),e.remove(document,"pointermove",this,!1),this.swipe=!1,t.el){var n=t.el.className;if(t.el.className=n.replace(" fyuse","").replace(" fyuse",""),t.config.zoom){var r=Date.now();if(r-this.pointer.lastTouch<252)return this._dbTap(t),void(this.pointer.lastTouch=r);this.pointer.lastTouch=r}this._startDecelAnim(t),t["onmouseup"]&&t["onmouseup"]()}}},{key:"_keepScrolling",value:function(e){var t=this;e?(this.focus=!0,setTimeout(function(){t.focus&&(t.lock_action=!0)},58),clearTimeout(this.timeout),this.timeout=null):this.timeout=setTimeout(function(){t.focus=!1,t.lock_action=!1,
fyu.MotionHelper&&fyu.MotionHelper.calibrate()},200)}},{key:"_startTouch",value:function(t,i){return!!this.enabled&&(e.add(document,"touchmove",this,!1),e.add(document,"touchend",this,!1),this._checkAutoPlay(),this.swipe=!0,this.pointer.start=h(i),this.pointer.move=h(i),2===this.pointer.start.fingers?(this._prevent(i),this.focus=!0,this.scale.start=i.touches,this.scale.value=1,!1):(this._keepScrolling(!0),this.pointer.points=[],this.pointer.addPoint(),void t.flintRendering({swipe:!0})))}},{key:"_moveTouch",value:function(e,t){var i=h(t);if(i.fingers>1)return this._mobileZoom(e,t),!1;if(!(i.fingers>0))return t.preventDefault(),void t.stopPropagation();if(e.renderer.isPan){this._prevent(t);var n=t.touches[0].pageX-e.renderer.el.offsetLeft,r=t.touches[0].pageY-e.renderer.el.offsetTop;return this.dragX||(this.dragX=n,this.dragY=r),e.renderer.translate(1.5*(n-this.dragX),1.5*(r-this.dragY),e),this.dragX=n,this.dragY=r,!1}this._dist(e,i),this.pointer.addPoint(),e.flintRendering({swipe:!0})}},{key:"_endTouch",value:function(t,i){if(this._keepScrolling(),this.dragX=0,this.dragY=0,e.remove(document,"touchend",this,!1),e.remove(document,"touchmove",this,!1),this.swipe=!1,t.config.zoom&&1===this.pointer.start.fingers){var n=Date.now();if(n-this.pointer.lastTouch<236&&Math.abs(this.pointer.start.x-this.pointer.move.x)<=24)return this._dbTap(t),void(this.pointer.lastTouch=n);this.pointer.lastTouch=n}this._startDecelAnim(t),this._tap(t,i)}},{key:"_startHover",value:function(t,i){this._checkAutoPlay(),this.pointer.start=h(i,t),this.pointer.move=h(i,t),this.swipe=!0,this.focus=!0,e.add(document,"mousemove",this,!1),e.add(t.el,"mouseout",this,!1),this._hover(t,i)}},{key:"_moveHover",value:function(e,t){var i=h(t,e);return a(i)?(this._prevent(t),!1):(this.lock_action&&this._prevent(t),this._dist(e,i),void(this.scrolling||e.flintRendering()))}},{key:"_endHover",value:function(t,i){this.focus=!1,e.remove(t.el,"mouseout",this,!1),e.remove(document,"mousemove",this,!1)}},{key:"_createPointer",value:function(e){return{points:[],addPoint:function(){for(var e=Date.now();this.points.length>0&&!(e-this.points[0].time<=100);)this.points.shift();var t=this.move.x,i=this.move.y;this.points.push({x:t,y:i,time:e})},start:{x:0,y:0},move:{x:0,y:0},end:{x:0,y:0},frames:{current:e,srcId:0,tgtId:0,alpha:0,curFrameId:e},set:function(e){this.frames.current=e,this.frames.tgtId=e,this.frames.srcId=e,this.frames.alpha=0,this.frames.curFrameId=e}}}},{key:"_addOverlayOn",value:function(e,t){f(e),e.events[t].push(function(){if(e.el.getElementsByClassName("fyu_clickndrag").length>0){var i=e.el.getElementsByClassName("fyu_clickndrag")[0];i.parentNode.removeChild(i),i=null}e.events[t].pop()})}},{key:"_dist",value:function(e,t,i){var n,r,s,a,o,l=e.renderer,h=e.listeners,c=h.pointer,f=(l.tween.enabled,e.numframesAvail-1),d=f,p=0,m=(e.numframes-1,e.numframes-2,0),g=0,v=0,y=0,w=0,b=0;if(i)90===window.orientation?(y=-t.y,w=t.x):window.orientation===-90?(y=t.y,w=-t.x):(y=t.x,w=t.y),b={x:0,y:0};else{var x=58;y=t.x-c.move.x,w=t.y-c.move.y,b=u(x,y,w)}if(i?(y*=-e.direction.gyroX,w*=e.direction.gyroY):(y*=e.direction.swipeX,w*=e.direction.swipeY),Math.abs(y)>Math.abs(w)?(n=y,g=b.x):(n=w,g=b.y),i?(v=Math.abs(n)/6.18,m=n<0?-.01:.01,v>9&&(v=9)):(v=fyu.info.hasTouch?1+6.06*(g-.01666):1+5.45*(g-.01666),m=n<0?-.01:.01,v>11&&(v=11)),0!==n){o=c.frames.curFrameId;var _=e.frame_map.length/2,k=(_>153?185:_+30)*m*v,T=d/10>>0;if(d<11?(k=Math.abs(k)/k,T=.5):T>50&&(T=50),Math.abs(k)>T)o+=k<0?-T:T;else{if(!k)return;o+=k}e.more.canLoop?o<0?o+=e.frame_map.length-1:o>=e.frame_map.length&&(o>>=0,o-=e.frame_map.length-1):o=Math.max(p,Math.min(e.frame_map.length-1,o)),r=Math.round(o),s=r+1,a=o-r,c.frames.srcId=r,c.frames.tgtId=s,c.frames.alpha=a,c.frames.curFrameId=o}return c.move=t,!0}},{key:"_wheel",value:function(e,t){if(!this.enabled)return!1;t.preventDefault();var i=t.wheelDelta?t.wheelDelta/40:t.detail?-t.detail:0;return i&&e.renderer.zoom(e,i,t),!1}},{key:"_mobileZoom",value:function(e,t){t.preventDefault(),t.stopPropagation();var i=this.scale.value,n=void 0;return this.scale.end=t.touches,this.scale.value=l(this.scale.start,this.scale.end),n=this.scale.value<1?100*(this.scale.value-i):50*(this.scale.value-i),e.renderer.zoom(e,n),!1}},{key:"scrollOnHover",value:function(e){this.scrolling=!0}},{key:"_pan",value:function(e,t,i){if(i&&this.canvasPan){var n=t.pageX-e.renderer.el.offsetLeft,s=t.pageY-e.renderer.el.offsetTop;return e.renderer.translate(1.2*(n-this.dragX),1.2*(s-this.dragY),e),this.dragX=n,this.dragY=s,!0}e.config.zoom&&(r(t)||e.renderer.isPan&&(this.canvasPan=!0,this.dragX=this.pointer.start.x-e.renderer.el.offsetLeft,this.dragY=this.pointer.start.y-e.renderer.el.offsetTop))}},{key:"_checkAutoPlay",value:function(){this.autoplay&&(this.autoplay.stop(),this.autoplay=null)}},{key:"_checkMotion",value:function(){fyu.MotionHelper&&fyu.MotionHelper.calibrate()}},{key:"_isAction",value:function(e){return 1===e.target.fy}},{key:"_tap",value:function(e,t){var i=this.pointer.start;if(i.target===t.target&&i.target.hasAttribute("tap"))for(var n=e.events.ontap,r=n.length;r-- >0;)if(n[r].elem===i.target){n[r].func();break}}},{key:"_hover",value:function(e,t){for(var i=e.events.onhover,n=i.length;n-- >0;)i[n]()}},{key:"_drag",value:function(e){for(var t=e.events.ondrag,i=t.length;i-- >0;)t[i]()}},{key:"_prevent",value:function(e){return e=e||window.event,e.preventDefault&&(e.preventDefault(),e.stopPropagation()),e.returnValue=!1,!1}},{key:"destroy",value:function(){document.removeEventListener("touchmove",this._tm,{passive:!1}),this._tm=null}}],[{key:"add",value:function(e,t,i,n){e.addEventListener(t,i,{passive:!1,capture:!0})}},{key:"remove",value:function(e,t,i,n){e.removeEventListener(t,i,{passive:!1,capture:!0})}}]),e}();i["default"]=g;i.add=g.add,i.remove=g.remove},{}],5:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var r=e("./visualization/fyu-viewer"),s=n(r),a=e("./utils/net"),o=n(a),l=e("./utils/helper-funcs"),u=e("./utils/utils"),h=n(u),c=e("./ui/ui"),f=n(c);window.fyu=window.fyu||{entries:[],o:{},callbacks:{},info:{is_mobile:!1,hasTouch:!!("ontouchstart"in window),hasGyro:!!window.DeviceMotionEvent},utils:null,ui:f["default"],autoplay:{},net:o["default"],root_path:"https://fyu.se/assets/2.0/viewer/",plugins:{},graveyard:{},addViewer:function(e,t,i,n){var r=document.createElement("div"),a="fyu_wrapper";return a=1===n.fy.m?"fyu_wrapper landscape":"fyu_wrapper portrait",r.className=a,"string"==typeof e?document.getElementById(e).appendChild(r):e.appendChild(r),s["default"].addViewer(r,t,i,n)},removeViewer:s["default"].removeViewer},fyu.utils||(fyu.utils=new h["default"],h["default"].makeShims(window),window.addEventListener&&(window.addEventListener("resize",function(e){(0,l.fireEvent)("resize",e),s["default"].renderOnViewport()},!1),window.addEventListener("scroll",s["default"].renderOnViewport,!1)))},{"./ui/ui":6,"./utils/helper-funcs":9,"./utils/net":13,"./utils/utils":14,"./visualization/fyu-viewer":16}],6:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=(0,w["default"])("a",{className:"fyubtn tags",onclick:function(){x.tags(e)}});t.fy=1,e.el.getElementsByClassName("fyu_actions")[0].appendChild(t)}function s(e){var t=(0,w["default"])("a",{className:"fyubtn x2",onclick:function(t){x.fullscreen(e)}});t.fy=1,e.el.getElementsByClassName("fyu_actions")[0].appendChild(t)}function a(e){this.renderer.zoom(this,e)}function o(e){var t,i,n={tap:!0,"class":"fyubtn zoom-in"},r={tap:!0,"class":"fyubtn zoom-out"},s=(0,w["default"])("a",n),o=(0,w["default"])("a",r),l=["top-right","top-left","bottom-left","top-right-vertical","top-left-vertical","bottom-left-vertical","bottom-right-vertical"],u=e.config.zoomBtnsPos;fyu.info.hasTouch?(e.events.ontap.push({elem:s,func:a.bind(e,14)}),e.events.ontap.push({elem:o,func:a.bind(e,-14)})):(s.on("click",a.bind(e,14),!1),o.on("click",a.bind(e,-14),!1)),u&&l.indexOf(u)>-1?(i="fyu_actions ",u.indexOf("-vertical")>-1&&(i+="f_act_vert ",(e.more.tags||e.config.fullscreen)&&(i+="f_act_fs_tag ")),i+=u.replace("-vertical","").replace("-","_"),t=(0,w["default"])("div",{"class":i}),e.el.appendChild(t)):t=e.el.getElementsByClassName("fyu_actions")[0],o.fy=1,s.fy=1,t.appendChild(o),t.appendChild(s)}function l(e){var t=0!==e.direction.swipeX?"horizontal":"vertical",i=function(t,i){return t+'[data-parent^="'+e.fid+'"]{cursor:url('+i+") 24 16, col-resize;}"},n=function(e,t){return e.split(",").map(function(e){return i(e,t)}).join("")},r={main:e.config.cursor||"https://i.fyu.se/assets/viewer/cursor_h.gif",grab:e.config.cursorGrab||"https://i.fyu.se/assets/viewer/cursor_hgrab.gif"},s={main:{horizontal:".fyv.horiz",vertical:".fyv.vert"},grab:{horizontal:".fyv.fyuse.horiz",vertical:".fyv.fyuse.vert"}},a="",o={main:s["main"][t],grab:s["grab"][t]};for(var l in o)a+=n(o[l],r[l]);return a}function u(e){var t=document.createElement("style"),i=l(e);if(t.setAttribute("type","text/css"),t.styleSheet)t.styleSheet.cssText=i;else{var n=document.createTextNode(i);t.appendChild(n)}document.getElementsByTagName("head")[0].appendChild(t)}function h(e,t){var i=window.innerWidth,n=window.innerHeight,r="overflow:hidden;";fyu.utils.isMobile&&(r="");var s=(0,w["default"])("div",{id:"fyu_cover"},[(0,w["default"])("div",{style:r+"height:100%;position:relative;z-index:100;margin:0;max-width:"+i+"px;max-height:"+n+"px;"}),(0,w["default"])("a",{"class":"fyu_close",onclick:c}),(0,w["default"])("div",{"class":"fyu_clayer",onclick:c})]),a=s.children[0];document.body.appendChild(s),document.body.className+=" fyu_fs",fyu.ui.fyuCover=s,fyu.ui.fsViewer=e;var o=e.el;o.setAttribute("data-parent",e.fid);var l=e.renderer.canvas,u=l.getBoundingClientRect(),h=document.body.getBoundingClientRect(),d=u.top-h.top,p=u.left-h.left,m=e.renderer.coords.width<<0,g="",v="z-index:100;position:absolute;left:"+p+"px;\n                    top:"+d+"px;opacity:1;width:"+m+"px;\n                    transition:all .34s;-webkit-transition:all .34s;"+g+";",y=null;return t&&(y=(0,w["default"])("img",{style:v,src:t}),document.body.appendChild(y)),a.appendChild(o),setTimeout(function(){requestAnimFrame(function(){var e=a.getBoundingClientRect(),i=document.body.getBoundingClientRect();t&&(y.style.top=e.top-i.top+"px",y.style.left=e.left-i.left+"px",y.style.width=a.offsetWidth+"px",y.style.opacity=.8),s.style.opacity=1,setTimeout(function(){t&&(y.parentNode.removeChild(y),y=null),document.addEventListener("keydown",f)},310)})},8),a}function c(){var e=fyu.ui.fyuCover;this&&this.removeEventListener&&this.removeEventListener("click",c),document.removeEventListener("keydown",f);var t=e.getElementsByClassName("fyv")[0];if(t){var i=fyu.ui.fsViewer,n=i.config.belongs;if(i.config.jsembed)if(null!==n&&n>=0){var r=v["default"].get(n).elem;r.appendChild(t)}else i.container.appendChild(t);else fyu.ui.fullScreenFromElemId.appendChild(t);fyu.ui.fullScreenFromElemId=null,i.renderer.resetTransform(),fyu.ui.inFullscreen=!1,setTimeout(function(){fyu.utils.fireEvent(i,"resize")},1)}i&&i.config.embed&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()),e.parentNode.removeChild(e),document.body.className=document.body.className.replace(" fyu_fs",""),e=null,fyu.ui.fyuCover=null,fyu.ui.fsViewer=null,window.FYU&&window.FYU.resizeAll()}function f(e){27===e.keyCode&&c()}function d(e,t){var i=fyu.ui.fyuCover;if(!i)return!1;var n=i.children[0],r=fyu.utils.isMobile?window.innerWidth:1.6*t.config.fy.w,s=fyu.utils.isMobile?window.innerHeight:1.6*t.config.fy.h,a=fyu.utils.isMobile?window.innerWidth:.8*window.innerWidth,o=fyu.utils.isMobile?window.innerHeight:.8*window.innerHeight,l=fyu.utils.isMobile?window.innerWidth/window.innerHeight:t.renderer.coords.width/t.renderer.coords.height,u=0,h=0;fyu.utils.isMobile&&l>.88&&(l=t.renderer.coords.width/t.renderer.coords.height),o>a?(u=a/l,a>r&&(a=r,u=a/l),u>s&&(u=s,a=u*l),h=a):(h=o*l,h>r&&(h=r,u=h/l),o>s&&(u=s,h=u*l),u=o),n.style.width=h+"px",n.style.height=u+"px",n.style.maxWidth=r+"px",n.style.maxHeight=s+"px",n.style.left=(window.innerWidth-h)/2+"px",n.style.top=(window.innerHeight-u)/2+"px"}function p(e){var t=/^function\s+([\w\$]+)\s*\(/.exec(e.toString());return t?t[1]:""}Object.defineProperty(i,"__esModule",{value:!0});var m=e("./../visualization/viewer-utils"),g=e("../utils/history"),v=n(g),y=e("../utils/dom"),w=n(y),b=document.documentElement,x={fullScreenFromElemId:null,inFullscreen:!1,fsContainer:null,fyuCover:null,buildInterface:function(e){!function(e){e.ui={},e.ui.fullscreen=function(){if(fyu.ui.fsViewer){if(fyu.ui.fsViewer===e)return void fyu.ui.exitfullscreen();fyu.ui.exitfullscreen()}fyu.ui.fullscreen(e)},e.ui.exitfullscreen=function(){fyu.ui.fsViewer===e&&fyu.ui.exitfullscreen()},e.ui.tags=function(){fyu.ui.tags(e)}}(e);var t=document.createElement("div");t.className="fyu_actions",e.renderer&&e.config.inlineBtn?e.renderer.el.appendChild(t):e.el.appendChild(t),e.config.zoom&&e.config.zoomBtns&&o(e),e.more.tags&&r(e),(e.config.cursor||e.config.cursorGrab)&&u(e),e.ie||(!e.config.embed||document.fullScreenEnabled||document.fullscreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||fyu.utils.isMobile)&&e.config.fullscreen&&s(e)},tags:function(e){if(e.tagsInstance){e.tagsInstance.enabled?e.tagsInstance.hide():e.tagsInstance.show();var t=e.el.getElementsByClassName("tags");t.length>0&&(t=t[0],e.tagsInstance.enabled?t.style.opacity="1.0":t.style.opacity="0.65")}},fullscreen:function(e){if(e.renderer.resetTransform(),this.inFullscreen){if(e&&e.config.embed)document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else if(this.fyuCover){var t=this.fyuCover.getElementsByClassName("fyu_clayer")[0],i=document.createEvent("HTMLEvents");i.initEvent("click",!0,!0),t.dispatchEvent(i)}return void(this.inFullscreen=!1)}if(e.config.embed&&!this.inFullscreen)return b.requestFullscreen?b.requestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.webkitRequestFullScreen&&b.webkitRequestFullScreen(),this.inFullscreen=!0,void setTimeout(function(){(0,m.fireViewerEvent)(e,"resize")},326);var n=void 0;if(e.loaded)try{n=e.renderer.canvas.toDataURL("image/jpeg")}catch(e){return}this.inFullscreen=!0,this.fullScreenFromElemId=e.el,this.fsContainer=h(e,n),this.resize(e),setTimeout(function(){(0,m.fireViewerEvent)(e,"resize")},0)},resize:function(e){var t=!1;e.events.resize.forEach(function(e){"resizeOnFullScreen"===p(e)&&(t=!0)}),t||e.events.resize.push(d),fyu.utils.fireEvent(e,"resize")},exitfullscreen:function(){c()},showActions:function(e){for(var t=e.el.getElementsByClassName("fyu_actions"),i=t.length;i--;)t[i].style.display="block"}};i["default"]=x},{"../utils/dom":8,"../utils/history":10,"./../visualization/viewer-utils":20}],7:[function(e,t,i){"use strict";function n(e){var t=e.id,i=void 0;l[t].timerId=setInterval(function(){i=0|e.renderer.visible_frame,l[t].prevFrame===i&&e.forceRenderHighResFrame(0|i),l[t].prevFrame=0|i},85)}function r(e){var t=e.id;l[t]&&(clearInterval(l[t].timerId),l[t].timerId=null)}function s(e,t){var i=t.config.highRes;return!!t.config.highRes&&(!t.imgdata[e].highres||!t.imgdata[e].highres<i)}function a(e){var t=e.id,i=l[t].prevFrame,n=8,r=void 0,a=[],u=[],h=!0;for(r in e.imgdata)r&&s(r,e)&&(i>r?a.push(r):u.push(r));a.length>n&&(a=a.slice(a.length-n,a.length)),u.length>n&&(u=u.slice(0,n)),l[t].asyncId=setInterval(function(){return a.length||u.length?(h=!!a.length&&(!u.length||!h),void(h?e.forceRenderHighResFrame(a.pop(),!0):e.forceRenderHighResFrame(u.pop(),!0))):(o(e),!1)},85)}function o(e){var t=e.id;l[t]&&(clearInterval(l[t].asyncId),l[t].asyncId=null)}Object.defineProperty(i,"__esModule",{value:!0});var l={};i.asyncFetch={start:function(e){var t=e.id;l[t]&&l[t].asyncId&&o(e),l[t]={fetchFinished:!1,prevFrame:0|e.renderer.visible_frame},n(e)},stop:function(e){var t=e.id;r(e),l[t].prevFrame=e.renderer.visible_frame,e.forceRenderHighResFrame(l[t].prevFrame),a(e)},forget:function(e){r(e),o(e),delete l[e.id]}}},{}],8:[function(e,t,i){"use strict";function n(e,t,i){(0,a.add)(this,e,t,i)}function r(e,t,i){(0,a.remove)(this,e,t,i)}Object.defineProperty(i,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=e("../controls/events"),o=["onclick","onmouseover","onmouseout","onmouseenter","onmouseleave"],l={elem:function(e,t,i){var l,u,h=document.createElement(e);if(i||(i=""),"string"==typeof i)u=i;else if("object"===("undefined"==typeof i?"undefined":s(i)))for(var c in i)i[c]&&i[c].tagName&&h.appendChild(i[c]);for(l in t)o.indexOf(l)!==-1?"function"==typeof t[l]&&(0,a.add)(h,l.replace("on",""),t[l],!1):"className"===l?h.setAttribute("class",t[l]):h.setAttribute(l,t[l]);return h.remove=function(){this.parentNode.removeChild(this)},u&&(h.innerHTML=u),h.on=n,h.off=r,h}};i["default"]=l.elem},{"../controls/events":4}],9:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.unpackByte=function(e){var t=e.config.fy.p;return t||(t=0),t/=1,e.more={tags:0!==(1&t),loop:0!==(4&t),pano:0!==(8&t),tweens:0!==(2&t)},!0},i.fireEvent=function(e,t){var i=fyu.entries.length,n=null,r=null;if(i>0)for(;0!==i--;)if(n=fyu.entries[i],n&&n.events[e])for(r=n.events[e].length;r-- >0;)n.events[e][r](t,n)},i.isElementInViewport=function(e){var t=e.getBoundingClientRect();if(0===t.width||0===t.height)return 0;var i=function(e){var t=window.innerHeight||document.documentElement.clientHeight,i=window.innerWidth||document.documentElement.clientWidth,n=e.top+e.height,r=e.left+e.width,s=Math.min(e.height-(n-t),n),a=Math.min(e.width-(r-i),r);return s/e.height>.22&&a/e.width>.22?s>30?2:1:s>39&&a>39?1:0},n=function(e){return e.offsetHeight>40};return!n(e)||i(t)},i.debounce=function(e,t,i){var n=void 0;return function(){var r=this,s=arguments,a=function(){n=null,i||e.apply(r,s)},o=i&&!n;clearTimeout(n),n=setTimeout(a,t),o&&e.apply(this,s)}},i.loadScript=function(e,t){var i=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.src=e,n.onload=function(){t&&t(),t=null,i.removeChild(n),n.onload=n=i=null},i.appendChild(n)},i.delayedExec=function(e,t){var i=void 0;return function(){clearTimeout(i),i=setTimeout(t,e)}}},{}],10:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(t){n(this,e),this.viewers={}}return r(e,[{key:"init",value:function(e,t){this.viewers[e]||(this.viewers[e]={elem:t,items:{},navigation:[]})}},{key:"add",value:function(e,t,i,n){var r=this.get(e);return i&&(r.items[t]=i),n&&r.navigation.push(t),{container:r.elem,viewer:r.items[t]}}},{key:"back",value:function(e,t,i){var n=this.get(e);if(n)return this.add(e,t,i),t=n.navigation.pop(),{container:n.elem,viewer:n.items[t]}}},{key:"get",value:function(e,t){return t?this.viewers[e].items[t]:this.viewers[e]}},{key:"avail",value:function(e){return this.viewers[e]&&this.viewers[e].navigation.length>0}},{key:"clear",value:function(){this.items=[]}},{key:"remove",value:function(e){}}]),e}(),a=new s;i["default"]=a},{}],11:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(t,i,r,s){n(this,e),this.mX1=t,this.mY1=i,this.mX2=r,this.mY2=s}return r(e,[{key:"get",value:function(t){return this.mX1===this.mY1&&this.mX2===this.mY2?t:e.calcBezier(this.getTForX(t),this.mY1,this.mY2)}},{key:"getTForX",value:function(t){for(var i=t,n=0;n<4;++n){var r=e.getSlope(i,this.mX1,this.mX2);if(0===r)return i;var s=e.calcBezier(i,this.mX1,this.mX2)-t;i-=s/r}return i}}],[{key:"calcA",value:function(e,t){return 1-3*t+3*e}},{key:"calcB",value:function(e,t){return 3*t-6*e}},{key:"calcC",value:function(e){return 3*e}},{key:"calcBezier",value:function(t,i,n){return((e.calcA(i,n)*t+e.calcB(i,n))*t+e.calcC(i))*t}},{key:"getSlope",value:function(t,i,n){return 3*e.calcA(i,n)*t*t+2*e.calcB(i,n)*t+e.calcC(i)}}]),e}();i["default"]=s},{}],12:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(){n(this,e),this.base=null,this.prev=null,this.sent=!1,this.dir="+",this.img=new Image}return r(e,[{key:"check",value:function(e,t){if(!t.ie){var i=void 0;if(this.base||(this.base=e,this.prev=e),e>this.prev?i="+":e<this.prev?i="-":e===this.prev&&(i=this.dir),this.dir!==i&&(this.dir=i,this.base=e,this.sent=!1),Math.abs(this.base-e)>=20&&!this.sent){if(t["ontilt"])for(var n=t["ontilt"].length;n-- >0;)t["ontilt"][n]&&t["ontilt"][n](t);this.img.src="https://fyu.se/api/1.5/logs/webviewer/"+t.fid,this.sent=!0}this.prev=e}}}]),e}();i["default"]=s},{}],13:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n={request:function(e){var t=e.url.replace("https:","").replace("http:",""),i=e.method||"GET",n=e.success||function(){},r=e.failure||function(){},s=void 0;window.XDomainRequest?(s=new XDomainRequest,s.onload=function(){n.call(null,s)}):s=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Msxml2.XMLHTTP"),s.onreadystatechange=function(){4===s.readyState&&(200===s.status?n.call(null,s):r.call(null,s))},s.open(i,t,!0),s.send(null)}};i["default"]=n},{}],14:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("./../visualization/viewer-utils"),o=(e("./helper-funcs"),e("../visualization/renderer-tween")),l=e("./../components/tags"),u=n(l),h=function(){function e(){r(this,e),this.isMobile=!1,this.andr=!1,this.ios=!1,this.req={d:0,c:{},set:function(e,t){return this.c[++this.d]={h:e,u:t},this.d},unset:function(e){delete this.c[e]},abort:function(e){fyu.utils.worker&&fyu.utils.worker.postMessage({"k":e});for(var t in this.c)this.c[t].u===e&&(this.c[t].h.onload=null,this.c[t].h.abort(),this.unset(t))}},this.fireEvent=a.fireViewerEvent,this.checkPlatforms()}return s(e,[{key:"getOffset",value:function(e){var t=void 0,i=void 0,n=void 0;return i=e.ownerDocument.documentElement,t=e.getBoundingClientRect(),n=document.defaultView||e.parentWindow||window,{top:t.top+(n.pageYOffset||i.scrollTop)-(i.clientTop||0),left:t.left+(n.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}}},{key:"checkPlatforms",value:function(){var e=fyu.info;this.andr=navigator.userAgent.toLowerCase().indexOf("android")>-1,this.andr||(this.ios=navigator.userAgent.indexOf("iPhone")!==-1||navigator.userAgent.indexOf("iPod")!==-1||navigator.userAgent.indexOf("iPad")!==-1),(this.ios||this.andr)&&(e&&(e.is_mobile=!0),this.isMobile=!0),e.hasGyro&&e.hasTouch&&!fyu.MotionHelper&&!function(e,t){var i=navigator.userAgent.toLowerCase().indexOf("android")>-1,n=!1,r=!1,s=!1,a={x:0,y:0,z:0,alpha:0,beta:0,gamma:0},o={x:0,y:0,z:0,rx:0,ry:0,rz:0,alpha:0,beta:0,gamma:0,m:0,rotation_x:.5,rotation_y:.5},l=function(e){var t=e.rotationRate;if(t&&null!=t.beta){r=!0;var n=t.beta*c.mult,l=t.alpha*c.mult;o.rotation_x=.001*n,o.rotation_y=.001*l,o.m=1}else if(e.beta){r=!0;var n=e.beta*c.mult,l=e.gamma*c.mult;0===o.rx&&(o.rx=n,o.ry=l),o.rx=n-o.rx,o.ry=l-o.ry,o.rotation_x=96e-5*o.ry,o.rotation_y=96e-5*o.rx,o.rx=n,o.ry=l}else if(e.accelerationIncludingGravity){r=!0,e.accelerationIncludingGravity.x&&(o.m=1);var u,h=e.accelerationIncludingGravity.x,f=e.accelerationIncludingGravity.y,d=e.accelerationIncludingGravity.z,p=Math.abs(h),m=Math.abs(f),g=Math.abs(d),v=.029,y=.029;if(o.rotation_x=1,o.rotation_y=-1,i&&(h*=-1,f*=-1,d*=-1),m>g&&(u=m,m=g,g=u,u=f,f=d,d=u),s)if(p>.01||m>.01){if(p>.01){v=h/50;var w=Math.abs(v);w>2.1&&(w=2.1,v=v<0?-2.1:2.1),o.rx=v,Math.abs(a.x)<w-.001?a.x<v?a.x+=.01*w:a.x>v&&(a.x-=.01*w):a.x>0?a.x+=.145*-w:a.x+=.145*w}else a.x=0,o.rx=0;if(m>.01){y=f/50;var b=Math.abs(y);b>2.1&&(b=2.1,y=y<0?-2.1:2.1),o.ry=y,Math.abs(a.y)<b-.001?a.y<y?a.y+=.01*b:a.y>y&&(a.y-=.01*b):a.y>0?a.y+=.145*-b:a.y+=.145*b}else a.y=0,o.ry=0;o.ry-=a.y,o.rx-=a.x,Math.abs(o.ry)<564e-6?o.ry=0:o.ry/=1.334,Math.abs(o.rx)<564e-6?o.rx=0:o.rx/=1.334,Math.abs(o.rx)>.072&&(o.rx=o.rx<0?-.072:.072),Math.abs(o.ry)>.072&&(o.ry=o.ry<0?-.072:.072)}else o.rx=0,o.ry=0,o.rz=0;else o.rx=0,o.ry=0,o.rz=0}},u=function(){},h=[],c={mult:.92,start:function(){return n?this:(n=!0,t.addEventListener("orientationchange",u,!1),t.addEventListener("devicemotion",l,!1),setTimeout(function(){0==o.m&&r&&(t.removeEventListener("devicemotion",l),t.addEventListener("deviceorientation",l,!0))},420),c.calibrate(),this)},stop:function(){return n=!1,t.removeEventListener("devicemotion",l),t.removeEventListener("orientationchange",u),t.removeEventListener("deviceorientation",l),this},isTracking:function(){return n&&r},calibrate:function(){return s=!0,this},get:function(){return o},interval:null,schedule:function(e,t){return this.interval||(this.interval=setInterval(function(){if(n&&r&&!document.hidden)for(var e=h.length;e-- >0;)h[e](o)},42)),h.push(e),e},clearScheduled:function(e){if(e){for(var t=h.length;t-- >0;)if(h[t]==e){h[t]=null,h.splice(t,1);break}if(h.length>0)return this}this.interval&&(clearInterval(this.interval),this.interval=null);for(var t=h.length;t-- >0;)h[t]=null;return h=[],this}};if(e.MotionHelper=c,i&&navigator.userAgent.toLowerCase().indexOf("irefox")!==-1&&(e.MotionHelper.mult=.58),e.callbacks){var f=e.callbacks.motion;if(f&&f.length>0){for(var d=f.length;d-- >0;)f[d]();e.callbacks.motion=[]}}}(window.fyu,window)}},{key:"fetchImage",value:function(e,t,i,n,r,s){if(window.URL){this.downloadBase(e,"blob",function(r){r.size>512?i(r,e,t,s):n(e,t,s)},function(){n(e,t,s)},r)}else{var a=new Image;a.onload=function(){i(a,e,t,s)},a.onerror=function(){n(e,t,s)},a.src=e}}},{key:"downloadBase",value:function(e,t,i,n,r,s){var a=this.req,o=new XMLHttpRequest,l=void 0;!t&&(t="text"),e=e.replace("https:","").replace("http:",""),o.open("GET",e,!0),o.responseType=t,o.onload=function(){return a.unset(l),0!==o.status||s?void(o.readyState===XMLHttpRequest.DONE&&200===o.status?i(o.response):n()):void _.downloadBase(e,t,i,n,r,1)},o.onerror=function(){a.unset(l),n()},l=a.set(o,r),o.send(null)}},{key:"downloadTags",value:function(e){var t="tags.json";window.location.href.indexOf("autotag=1")>0&&(t="autotags.json"),fyu.net.request({url:e.path+t+"?t="+(new Date).getTime(),success:function(t){fyu.utils.insertTags(e,JSON.parse(t.response||t.responseText))}})}},{key:"insertTags",value:function(e,t){return!(!e||!t)&&(e.tagsInstance||(e.tagsInstance=new u["default"](e)),void e.tagsInstance.create(t))}},{key:"downloadTweens",value:function(e){this.downloadBase(e.path+"tween.web","arraybuffer",function(t){(0,o.readTweenData)(t,e)},function(){},{uid:e.uid})}},{key:"hashLinks",value:function(e){return e=e.replace(/#([A-Za-z0-9\u00C0-\u017F]+)/g,"<a style='cursor:pointer' class='action _hash' href='https://fyu.se/t/$1'>#$1</a>")}},{key:"tagLinks",value:function(e){var t=e.match(/@([^\]]+)/g),i=t?t.length:0;if(0===i)return e;for(var n="",r=0;r<i;++r)t[r].indexOf("~")!==-1?(n=t[r].split("~"),n="<a href='//fyu.se/u/"+n[0].substr(2)+"'>@"+n[1]+"</a>",e=e.replace(t[r]+"]]",n)):e=e.replace(t[r]+"]]","");return e}},{key:"htmlEntities",value:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}},{key:"linkify",value:function(e){var t=/((www[-A-Z0-9]{0,1}\.[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])|(\b(https?|ftp|file|):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|]))/gi;return e.replace(t,"<a style='cursor:pointer' target='_blank' href='$1'>$1</a>").replace(/='www./g,"='http://")}}],[{key:"makeShims",value:function(e){e.requestAnimFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)}}()}}]),e}();i["default"]=h},{"../visualization/renderer-tween":17,"./../components/tags":2,"./../visualization/viewer-utils":20,"./helper-funcs":9}],15:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("./../utils/key-spline"),o=n(a),l=function(){function e(t,i,n,s){r(this,e),this.loop=null;var a=52,l=n;l||(l=[.4,0,.6,1]);var u=new o["default"](l[0],l[1],l[2],l[3]),h=(i/a<<0)+1,c=h*(t.listeners.pointer.frames.current/t.numframes)<<0,f=!0;window.fyu&&!window.fyu.utils.isMobile&&(this.loop=setInterval(function(){if(!document.hidden&&t.onviewport){var e=3;f?++c:--c,c>=h-e?(f=!f,c-=e):c<=e+2&&(f=!f,c=e+2);var i=u.get(c/h);if(!t.loadedFull){var n=Math.round(t.numframes+i);if(!t.imgdata[n])return void(f=!f)}s(i)}},a))}return s(e,[{key:"stop",value:function(){this&&this.loop&&(clearInterval(this.loop),this.loop=null)}}]),e}();i["default"]=l},{"./../utils/key-spline":11}],16:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t,i,n){var r=e.config;t.lowres||i===r.thumb_index?t.lowres=!1:(t.lowres=!0,t.size<fyu.utils.rangeSize&&(t.lowres=!1)),t.index=i,i-=e.config.range[0],e.imgdata[n]=t}function a(e,t,i){var n=e.loadedFrames/t*100;n<=100?e.loader&&e.loader.setPercentage(n,e.loaded):e.loader&&e.loader&&e.loader.done(),i&&e.loadingThreads>0&&e.loadFrames()}function o(e,t,i,n){if(!fyu.graveyard[this.id]){var r=(this.config,this.numframesAvail);if(++this.loadedFrames,++this.loadingThreads,s(this,e,i,n),this.loadedFrames<r){if(24==this.loadedFrames&&this.more.loop&&(this.more.canLoop=!0),a(this,this.nfa,!this.loadPaused),this.loadedFrames>16&&!this.loaded){var o=function(){var e=navigator.userAgent,t=1==/Mobi/.test(e)?"mob":"dsk",i="no",n="no",r=0,s=0;if(window.chrome&&window.chrome.webstore||e.indexOf("Chrome/")>0?(r=e.indexOf("Chrome/"),s=7,i="chr"):window.opr&&opr.addons||window.opera||e.indexOf(" OPR/")>=0?(r=e.indexOf("OPR/"),s=4,i="opr"):window.ApplePayError||/constructor/i.test(window.HTMLElement)||function(e){return"[object SafariRemoteNotification]"===e.toString()}(!window["safari"]||safari.pushNotification)?(r=e.indexOf("Version/"),s=8,i="sfr"):"undefined"!=typeof InstallTrigger?(r=e.indexOf("Firefox/"),s=8,i="ffrx"):document.documentMode?(r=e.indexOf("MSIE "),
s=5,r===-1&&(r=e.indexOf("rv:"),s=3),i="ie"):window.StyleMedia?(r=e.indexOf("Edge/"),s=5,i="edge"):e.indexOf("UCBrowser/")>0&&(r=e.indexOf("UCBrowser/"),s=10,i="uc"),r&&(r=e.substring(r+s,e.indexOf(".",r))/1,(!r||r<0)&&(r=0)),"dsk"===t)1==/Windows/.test(e)?(n="win",1==/5.1;/.test(e)?n+=" xp":1==/6.0;/.test(e)?n+=" vista":1==/6.1;/.test(e)?n+=" 7":1==/6.2/.test(e)?n+=" 8":1==/10.0;/.test(e)&&(n+=" 10")):1==/Macintosh/.test(e)&&(n="mac",1==/OS X/.test(e)&&(n+=" osx"));else if("mob"===t)if(1==/Windows/.test(e))n="win",1==/Phone 8/.test(e)?n+=" phone8":1==/Phone 10/.test(e)&&(n+=" phone10");else if(1==/Android/.test(e)){var a=function(){if(/Android/.test(navigator.appVersion)){var e=navigator.appVersion.match(/Android (\d+).(\d+)/);return e}}();n=a[0]}else if(1==/iPhone;/.test(e)){var a=function(){if(/iP(hone|od|ad)/.test(navigator.appVersion)){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]}}();n="ios "+a[0]+"."+a[1]}else if(1==/iPad;/.test(e)){var a=function(){if(/iP(hone|od|ad)/.test(navigator.appVersion)){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]}}();n="ios "+a[0]+"."+a[1]}else n="bb";var o={b:i,d:t,v:r,t:(new Date).getTimezoneOffset()/60,o:n,l:Date.now()-R,w:("object"===("undefined"==typeof WebAssembly?"undefined":u(WebAssembly))&&"function"==typeof WebAssembly.instantiate)/1};if(!window.btoa)return"";for(var l=btoa(JSON.stringify(o)),h="",c=0;c<l.length;++c)h+=String.fromCharCode(l.charCodeAt(c)/1+1);return h};(0,T.proceed)(this);var l=13,h=Math.pow(2,l)-1,c=0,f=window.innerWidth,d=window.innerHeight;f>h&&(f=h),d>h&&(d=h),c=(f&h)*Math.pow(2,3*l),c+=(d&h)*Math.pow(2,2*l),c+=(this.renderer.transform.scale*this.renderer.width>>0&h)<<l,c+=this.renderer.transform.scale*this.renderer.height>>0&h;var p=new Image;p.src="https://api.fyu.se/1.1/data/webload/"+this.fid+"?v=1&r="+c+"&b="+escape(o())}}else if(this.loaded){if(this.loadedFull)return;this.loadedFull=!0,this.renderer.enableTween();var m=0,n=-1;this.frame_map&&this.listeners.pointer&&(m=this.frame_map.length,n=this.frame_map[this.listeners.pointer.frames.current]);var g=this.imgdata.length;this.frame_map=[];for(var v=0;v<g;++v)this.imgdata[v]&&this.frame_map.push(v);if(this.counter=1,m!==this.frame_map.length&&n>-1)for(var v=0;v<this.frame_map.length;++v)if(this.frame_map[v]===n){this.listeners.pointer.set(v);break}if(this.loader&&(this.loader.done&&this.loader.done(),this.config.nologo&&this.loader.removeLogo&&this.loader.removeLogo()),this["oncomplete"])for(var g=this["oncomplete"].length;g-- >0;)this["oncomplete"][g]&&this["oncomplete"][g](this),this["oncomplete"][g]=null}else{this.loadedFull=!0,this.onviewport=(0,x.isElementInViewport)(this.el),this.renderer.enableTween(),this.loader&&this.loader.done&&this.loader.done(),24==this.loadedFrames&&this.more.loop&&(this.more.canLoop=!0);var m=0,n=-1;this.frame_map&&this.listeners.pointer&&(m=this.frame_map.length,n=this.frame_map[this.listeners.pointer.frames.srcId]);var g=this.imgdata.length;this.frame_map=[];for(var v=0;v<g;++v)this.imgdata[v]&&this.frame_map.push(v);if(this.counter=1,m!==this.frame_map.length&&n>-1)for(var v=0;v<this.frame_map.length;++v)if(this.frame_map[v]===n){this.listeners.pointer.set(v);break}(0,T.proceed)(this)}}}function l(e,t,i){if(!fyu.graveyard[this.id]){var n=(this.config,this.numframesAvail),r=this.loadedFrames;this.imgdata[i]=null,++this.loadingThreads,++r<n||this.loaded||(this.loadedFull=!0,this.loader&&this.loader.done&&this.loader.done(),(0,T.proceed)(this)),this.loadedFrames=r}}Object.defineProperty(i,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=e("./renderer"),f=n(c),d=e("../components/fyu-circle-loader"),p=n(d),m=e("./../controls/controls"),g=n(m),v=e("./autoplay"),y=n(v),w=e("./../components/tags"),b=n(w),x=e("../utils/helper-funcs"),_=e("../utils/async-fetch"),k=e("../utils/utils"),T=(n(k),e("./viewer-utils")),I=e("../utils/dom"),z=n(I),F=e("../utils/history"),C=n(F),M=-1,E={},O=0,R=Date.now(),L=function(){function e(t,i,n,s){r(this,e),this.fyufrX=960,this.fyufrY=540,this.id=++M,this.fid=i,this.path=n,this.renderer=null,this.tagsInstance=null,this.container=t,this.config=s,this.more=null,this.el=null,this.frame_map=[];var a=1;if(1===this.config.fastLoad&&(a=8,this.config.fy.f>366?a=16:this.config.fy.f<120&&(a=4)),s.min_jump?this.config.min_jump=s.min_jump/1:this.config.min_jump=a,this.config.resolution&&this.config.zoomResolution&&(this.config.zoomResolution=this.config.zoomResolution.slice(this.config.zoomResolution.indexOf(this.config.resolution)+1)),this.loader=null,this.loaded=!1,this.loadedFull=!1,this.loadedFrames=0,this.loadPaused=null,this.loadingThreads=fyu.utils.isMobile?5:18,this.onviewport=!0,this.imgdata=[],this.events={},this.n_dim=0,this.direction=null,this.isRendering=!1,this.listeners={},this.plugins={},this.onFrameSuccess=o.bind(this),this.onFrameFail=l.bind(this),this.events.resize=[],this.events.orientation=[],this.events.ondrag=[],this.events.onhover=[],this.events.ontap=[],s.resolution||s.zoomResolution&&s.zoomResolution.length>0){s.zoomResolution&&!s.zoomResolution[2]&&"720p"===s.zoomResolution[0]&&"1080p"===s.zoomResolution[1]&&(this.config.zoomResolution=["1080p"]);var u=s.resolution?s.resolution:s.zoomResolution[s.zoomResolution.length-1];"1080p"===u?(this.fyufrX=1920,this.fyufrY=1920*(s.fy.h/s.fy.w)):"720p"===u?(this.fyufrX=1280,this.fyufrY=1280*(s.fy.h/s.fy.w)):"4k"===u?(this.fyufrX=3840,this.fyufrY=3840*(s.fy.h/s.fy.w)):(this.fyufrX=960,this.fyufrY=960*(s.fy.h/s.fy.w))}this.setUpViewerConfig(),this.numframes=s.fy.f;var h=document.createElement("div");if(h.setAttribute("data-parent",i),h.className="fyv",this.container.appendChild(h),this.el=h,(0,T.checkOlderBrowers)(this,i),(0,x.unpackByte)(this),this._startUpRendererAndCover(),(0,g["default"])(this,this.getFrameIndex(this.config.fy.t)),s.preload=s.autoplay?1:s.preload,s.preload){this.loader=s.loader?new s.loader(this):new p["default"](this);var c=this;s.pauseOutOfViewPort?(this.onviewport=(0,x.isElementInViewport)(this.el),this.onviewport&&setTimeout(function(){c.loadFrames()},20)):setTimeout(function(){c.loadFrames()},0)}else this.addDirectionButtonAndLoader();if(this.more.tags||(this.more.tags=window.location.href.indexOf("autotag=1")>0),this.more.tags&&(this.tagsInstance=new b["default"](this),fyu.utils.downloadTags(this)),this.more.tweens&&this.config.isTweened&&navigator.appVersion.indexOf("MSIE 9")===-1&&fyu.utils.downloadTweens(this),fyu.ui&&fyu.ui.buildInterface(this),s.pano){var f=this;if(f.el&&f.el.getElementsByClassName("fyu_clickndrag").length>0&&(f.el.getElementsByClassName("fyu_clickndrag")[0].style.display="none"),fyu.plugins.pano)fyu.plugins.pano.add(f,f.path+(fyu.utils.isMobile?"pano_mobile.jpg":"pano.jpg")),2===s.pano&&f.plugins.pano.makeTags(f.path+"pano_tags.json");else{var d=document.createElement("script");d.src="https://fyu.se/assets/2.0/viewer/plugins/pano.js",d.onload=function(){fyu.plugins.pano.add(f,f.path+(fyu.utils.isMobile?"pano_mobile.jpg":"pano.jpg")),2===s.pano&&f.plugins&&f.plugins.pano.makeTags(f.path+"pano_tags.json")},document.head.appendChild(d)}}if(this["onready"])for(var m=this["onready"].length;m-- >0;)this["onready"][m]&&this["onready"][m](this),this["onready"][m]=null}return h(e,[{key:"startVisualization",value:function(){var e=this;this.onviewport=(0,x.isElementInViewport)(this.el);var t=this.getFrameIndex(this.config.thumb_index/1);if(this.listeners.pointer.set(t),this.listeners.enable(),!fyu.info.has_touch&&this.config.autoplay){var i=this.config.fy.f-1;this.listeners.autoplay=new y["default"](this,3080+10*i,null,function(t){var n=Math.round(i*t);n=e.getFrameIndex(n/1),e.renderer.displayFrame(n),e.listeners.pointer.set(n)})}}},{key:"_startUpRendererAndCover",value:function(){this.renderer=fyu.renderer=new f["default"](this,fyu.info.has_touch?"canvas":"canvas_big",this.config.fy.w>this.config.fy.h?this.fyufrX:this.n_dim,this.config.fy.w>this.config.fy.h?this.n_dim:this.fyufrX),this.el.appendChild(this.renderer.getElement()),this.renderer.makeCover(this,this.config.thumb_index,this.getFrameIndex(this.config.thumb_index))}},{key:"addDirectionButtonAndLoader",value:function(){var e=this,t=document.createElement("a");if(t.className="plBtn",this.el.appendChild(t),!this.config.hover_load||fyu.utils.isMobile)t.onclick=function(){e.loader=e.config.loader?new e.config.loader(e):new p["default"](e),e.loadFrames(),t.onclick=null,e.el.removeChild(t),t=null};else{var i=function(){if(!(O>0)){if(e.loadPaused=!1,e.loadedFull)return e.el.onmouseover=null,e.el.onmouseout=null,!1;e.loader&&(e.loader.el.parentNode.style.display="block"),e.loadFrames()}};t.onclick=function(){e.el.onmouseover=null,e.el.onmouseout=null,e.loader=e.config.loader?new e.config.loader(e):new p["default"](e),e.loadFrames(),t.onclick=null,e.el.removeChild(t),t=null};var n=function(){if(!e.listeners||!e.listeners.sink){if(e.loadedFull)return e.el.onmouseout=null,e.el.onmouseover=null,!1;e.loadPaused=!0,e.loader&&(e.loader.el.parentNode.style.display="none"),e.el.onmouseover||(e.el.onmouseover=i)}};this.el.onmouseover=function(){O>0||(t&&(t.onclick=null,e.el.removeChild(t),t=null),e.loader=e.config.loader?new e.config.loader(e):new p["default"](e),e.loadFrames(),e.loadPaused=!1,e.el.onmouseout=n,e.el.onmouseover=null)}}}},{key:"setUpViewerConfig",value:function(){var e=this.config.fy,t=this.config;if(e.w>e.h?(t.fy.ratio=e.w/e.h,t.fy.ratio2=t.fy.ratio,this.n_dim=Math.ceil(this.fyufrX/(e.w/e.h))):(t.fy.ratio=e.w/e.h,t.fy.ratio2=e.h/e.w,this.n_dim=Math.ceil(this.fyufrX*(e.w/e.h))),t.thumb_index=t.thumb_index?t.thumb_index:t.fy.t,t.lite&&(t.pauseOutOfViewPort=!0),t.lite&&!t.range){var i=e.s.filter(function(e){return t.thumb_index>=e[0]&&t.thumb_index<=e[1]})[0];t.range=[i[0],i[1]]}if(t.range&&t.range[0]&&t.range[1]?((t.range[1]>e.f-1||t.range[1]<0)&&(t.range[1]=e.f),t.range[0]<0&&(t.range[0]=0),e.f=t.range[1]-t.range[0],(t.thumb_index<t.range[0]||t.thumb_index>t.range[1])&&(t.thumb_index=Math.ceil((t.range[1]+t.range[0])/2))):t.range=[0,e.f],t.stab_scale=!1,t.fy.g&&(t.stab_scale=t.fy.w/t.fy.cw*t.fy.g),window.location.href.indexOf("file://")>-1&&(this.path="https:"+this.path.replace("https:","").replace("http:","")),t.hasOwnProperty("logo")||(t.logo=1),t.hasOwnProperty("fullscreen")||(t.fullscreen=1),t.controls||(t.controls={drag:!0}),t.fy.l[1]===-1&&(t.fy.l[1]=this.numframes-1),t.range&&(t.fy.t<t.range[0]||t.fy.t>t.range[1])&&(t.fy.t=t.range[0]+(t.range[1]-t.range[0])/2>>0),t.fy.t<0&&(t.fy.t=0),t.isTweened=t.fy.cv===-1,t.embed=window.location.href.indexOf("embed/")!==-1,!t.embed&&(t.embed=window.location.href.indexOf("hw=1")!==-1,!t.embed))try{window.self!==window.top&&(t.embed=!0)}catch(e){t.embed=!0}this.direction=(0,T.getDirection)(t),this.events.orientation.push(function(e,t){t.direction=(0,T.getDirection)(t.config)}),t.easing=fyu.info.hasTouch?.82:.34,null!==t.belongs&&t.belongs>=0?C["default"].init(this.id,this.container):C["default"].init(this.id,this.container)}},{key:"fetchFrame",value:function(e){var t=this.config,i=".jpg?v=1",n="frames_",r=(t.mask?"0s_"+t.mask+"/":"")+(t.resolution?t.resolution+"/":""),s=this.path+r+n+e[0]+i;fyu.utils.fetchImage(s,e[0],this.onFrameSuccess,this.onFrameFail,this.id,e[1])}},{key:"loadParts",value:function(){var e=!0,t=this.loadingParts[this.loadingPartsIndex];if(t&&0===t.left.length&&0===t.right.length&&(t=this.loadingParts[++this.loadingPartsIndex]),!t)return!0;for(;(t.left.length||t.right.length)&&this.loadingThreads>0;)e=!!t.left.length&&(!t.right.length||!e),e?this.fetchFrame(t.left.shift()):this.fetchFrame(t.right.shift()),--this.loadingThreads;return!0}},{key:"prepareFrames",value:function(){var e=this.config,t=e.thumb_index,i=e.range[0],n=e.range[1]-1,r=[{left:[],right:[]}];if(this.config.fy.f<24){for(var s=0;s<this.config.fy.f;++s)r[0].left.push([s,s]);return this.numframesAvail=this.config.fy.f,this.nfa=this.numframesAvail,r}var a=this.config.min_jump,o=t/a>>0,l=o;if(this.more.loop){for(var u=Math.ceil(n/a),h=u/2>>0,s=0,c=t+a;s<h;++s)c>=n&&(c-=n),r[0].left.push([c,c]),c+=a;for(var s=0,c=t-a;s<h;++s)c<i&&(c=n-Math.abs(c)),r[0].right.push([c,c]),c-=a}else{for(var f=t+a;f<=n;f+=a)r[0].left.push([f,f]);for(var d=t-a;d>=i;d-=a)r[0].right.push([d,d])}if(this.numframesAvail=r[0].right.length+r[0].left.length,this.nfa=this.numframesAvail,a>1&&a%2===0){r[1]={left:[],right:[]};var p=t+a/2;o=p/a>>0,l=p/a>>0;for(var m=p;m<=n;m+=a)r[1].left.push([m,m]);for(var g=p;g>=i;g-=a)r[1].right.push([g,g]);if(this.numframesAvail=r[0].right.length+r[0].left.length+r[1].right.length+r[1].left.length,a>=3){var v=a/2,y=v/2;if(y>>0===y){r[2]={left:[],right:[]},r[3]={left:[],right:[]};var w=v-y;p=t+w,o=p/a>>0,l=p/a>>0;for(var b=p;b<=n;b+=a)r[2].left.push([b,b]);for(var x=p;x>=i;x-=a)r[2].right.push([x,x]);w=v+y,p=t+w;for(var _=p;_<=n;_+=a)r[3].left.push([_,_]);for(var k=p;k>=i;k-=a)r[3].right.push([k,k]);this.numframesAvail=r[0].right.length+r[0].left.length+r[1].right.length+r[1].left.length+r[2].right.length+r[2].left.length+r[3].right.length+r[3].left.length}}}return r}},{key:"loadFrames",value:function(){if(!this.loadingParts){var e=(0,z["default"])("div");if(e.className="fyul",!this.el)return;this.el.appendChild(e),this.ll=e,this.loadingParts=this.prepareFrames(),this.loadingPartsIndex=0}this.loading=!0,this.loadParts()}},{key:"flintRendering",value:function(){this.renderer&&(this.gt||(this.isRendering||(this.isRendering=!0,++O<1&&(O=1)),this.renderPre(this)))}},{key:"renderPre",value:function(e){this.render(e)}},{key:"_easing",value:function(e){var t,i=this.getFrameIndex(this.renderer.visible_frame),n=e.frames.srcId,r=.37;return r&&!this.more.loop?(t=n<i?Math.floor((n-i)*r):Math.ceil((n-i)*r),i+=t):n}},{key:"render",value:function(e){if(e.isRendering){var t,i=e.listeners.pointer;if(this.renderer.tween.enabled){t=i.frames.curFrameId;var n=i.frames.srcId;this.renderer.displayTween(n,n+1,i.frames.alpha),i.frames.current=t}else{var n=this._easing(i);t=i.frames.curFrameId,this.renderer.displayFrame(n),i.frames.current=t}e.isRendering=!1,--O}}},{key:"forceRenderHighResFrame",value:function(e,t,i){var n=this,r=e?e:n.renderer.visible_frame,s=n.imgdata[r],a=parseInt(n.config.range[0])+parseInt(r),o=n.path+(this.config.mask?"0s_"+this.config.mask+"/":"")+"frames_"+a+".jpg?v=1",l=this.config.highRes;if(i/1>0&&(l=i),l&&n.config.zoomResolution){if(n.config.zoomResolution.length<l)return;if(s&&(!s.highres||s.highres<l)){if(s.highres=l,this.config.zoomResolution.length>0&&(o=n.path+this.config.zoomResolution[l-1]+(this.config.mask?"/0s_"+this.config.mask+"/":"/")+"frames_"+a+".jpg?v=1"),n.imgdata[r].loading)return;n.imgdata[r].loading=1,fyu.utils.fetchImage(o,r,function(e,i,r){n.imgdata[r]=e,i.indexOf("/1080p/")>-1?(n.imgdata[r].highres=n.config.zoomResolution.indexOf("1080p")+1,(0,T.afterForceRenderFetch)(r,n,t)):i.indexOf("/720p/")>-1?(n.imgdata[r].highres=n.config.zoomResolution.indexOf("720p")+1,(0,T.afterForceRenderFetch)(r,n,t)):i.indexOf("/4k/")>-1&&(n.imgdata[r].highres=n.config.zoomResolution.indexOf("4k")+1,(0,T.afterForceRenderFetch)(r,n,t))},function(){n.imgdata[r].loading=!1},n.id,!0)}}return!1}},{key:"getFrameIndex",value:function(e){var t=0,i=-1;if(this.frame_map&&this.listeners.pointer&&(t=this.frame_map.length,i=this.frame_map[this.listeners.pointer.frames.srcId>>0]),this.loadedFrames>this.frame_map.length+2){var n=this.imgdata.length;this.frame_map=[];for(var r=0;r<n;++r)this.imgdata[r]&&this.frame_map.push(r);if(i>-1&&t!==this.frame_map.length)for(var r=0;r<this.frame_map.length;++r)if(this.frame_map[r]===i&&i!==r){this.listeners.pointer.set(r);break}}for(var s=!1,r=0;r<this.frame_map.length;++r)if(e===this.frame_map[r])return r;if(!s){for(var a=1e3,o=0,r=0;r<this.frame_map.length;++r){var l=Math.abs(this.frame_map[r]-e);l<a&&(a=l,o=r)}return o}for(var n=this.imgdata.length;n-- >0;)if(this.imgdata[n]&&this.imgdata[n].index===e)return n;return e-=this.config.range[0]}},{key:"getThumbPlayPath",value:function(){var e=this.path+"thumb_play.jpg";return"/"===e[0]?"https:"+e:e}},{key:"goTo",value:function(e,t,i,n){if(this.listeners.autoplay&&this.listeners.autoplay.stop(),this.gt&&(clearTimeout(this.gt),this.gt=null),e<this.config.range[0])return!1;if(e>this.config.range[1])return!1;if(e==this.renderer.visible_frame)return!0;var r=0,s=-1;this.frame_map&&this.listeners.pointer&&(r=this.frame_map.length,s=this.frame_map[this.listeners.pointer.frames.srcId]);var a=this.imgdata.length;this.frame_map=[];for(var o=0;o<a;++o)this.imgdata[o]&&this.frame_map.push(o);if(this.counter=1,r!==this.frame_map.length&&s>-1)for(var o=0;o<this.frame_map.length;++o)if(this.frame_map[o]===s&&o!==s){this.listeners.pointer.set(o);break}if(n||(e=this.getFrameIndex(e)),t)this.renderer.displayFrame(e),this.listeners.pointer.frames.alpha=0,this.listeners.pointer.frames.current=e,this.listeners.pointer.frames.curFrameId=e,this.listeners.pointer.frames.tgtId=e,this.listeners.pointer.frames.srcId=e;else{var l=function(e){return e=7*e-3.5,1/(1+Math.pow(Math.E,-e))},u=e-this.listeners.pointer.frames.curFrameId;if(this.more.canLoop){var h=0;h=this.listeners.pointer.frames.curFrameId>e?this.loadedFrames-this.listeners.pointer.frames.curFrameId+e:-(this.loadedFrames-e+this.listeners.pointer.frames.curFrameId),Math.abs(h)<Math.abs(u)&&(u=h)}if(Math.abs(u)<5)return this.goTo(e,1,0,1);var c=16*Math.abs(u);c<380?c=380:c>1220&&(c=1220),i&&(c=i);var o=-1,f=c/34>>0,d=this,p=0,m=16,g=function t(){var i=u*l((o+1)/f),n=i-p;p=i;var r=Math.round(n),s=34;0===r&&o<f-1?s=10:0===r&&(s=c/14-6),d.gt=setTimeout(function(){if(++o<f){var i=d.listeners.pointer.frames.curFrameId+r;d.more.canLoop&&(i<0?i=d.loadedFrames+i:i>d.loadedFrames&&(i-=d.loadedFrames)),0!==r&&d.renderer.displayFrame(i),d.listeners.pointer.frames.alpha=0,d.listeners.pointer.frames.current=i,d.listeners.pointer.frames.curFrameId=i,d.listeners.pointer.frames.tgtId=i,d.listeners.pointer.frames.srcId=i,t()}else if(d.listeners.pointer.frames.curFrameId>>0!==e&&--m>0){var i=d.listeners.pointer.frames.curFrameId+(n<0?-1:1);d.more.canLoop&&(i<0?i=d.loadedFrames+i:i>d.loadedFrames&&(i-=d.loadedFrames)),0!==r&&d.renderer.displayFrame(i),d.listeners.pointer.frames.alpha=0,d.listeners.pointer.frames.current=i,d.listeners.pointer.frames.curFrameId=i,d.listeners.pointer.frames.tgtId=i,d.listeners.pointer.frames.srcId=i,t()}},s)};g()}return!0}},{key:"getCurrentFrameBlob",value:function(){return this.getFrameBlobForIndex(this.renderer.visible_frame)}},{key:"getFrameBlobForIndex",value:function(e){return!(!this.imgdata||!this.imgdata[e]||this.imgdata[e].loading)&&this.imgdata[e]}},{key:"pan",value:function(e){var t=this;if(e){if(t.listeners.nogyro=!0,fyu.utils.isMobile)return;t.el.className=t.el.className.replace("horiz","fygrab").replace("vert","fygrab")}else{if(this.listeners.nogyro=!1,fyu.utils.isMobile)return;if(this.direction){var i=" vert";0!==this.direction.swipeX&&(i=" horiz"),this.el.className="fyv"+i}}}},{key:"destroy",value:function(){fyu.graveyard[this.id]=!0,this.isRendering=!1,--O,clearTimeout(E[this.id]),E[this.id]=null,this.listeners&&(this.listeners.motionIntervalId&&(fyu.MotionHelper&&fyu.MotionHelper.clearScheduled(this.listeners.motionIntervalId),this.listeners.motionIntervalId=null),this.listeners.autoplay&&this.listeners.autoplay.stop(),this.listeners.destroy()),this.config.highRes&&_.asyncFetch.forget(q),this.renderer&&this.renderer.destroy(),this.el=null,this.c&&(this.c=null),fyu.utils.req.abort(this.id),this.loader&&this.loader.destroy&&this.loader.destroy(),this.renderer=this.loader=this.container=this.imgdata=this.events=null,this.plugins.pano&&this.plugins.pano.destroy(),this.plugins=null,fyu.o[this.id]=null,delete fyu.o[this.id];var e=fyu.entries.length;if(0===e)return!1;for(;0!==e--;)if(fyu.entries[e]===this){fyu.entries[e]=null,fyu.entries.splice(e,1);break}}},{key:"safeRender",value:function(e){if(!this.renderer.displayFrame(e))if(e>0)for(;!this.renderer.displayFrame(--e)&&0!==e;);else for(;!this.renderer.displayFrame(++e)&&10!==e;);}},{key:"showCaption",value:function(e){var t=this;if(t.renderer&&t.renderer.el){var i=!0,n=e.innerHTML,r=t.renderer.el.parentNode.getElementsByClassName("fy_cpt")[0];if(r&&r.tabIndex!==-5){if(r.innerHTML===n)return void("0"===r.style.opacity?(r.style.opacity="1",r.parentNode.parentNode.className+=" fyhi"):(r.parentNode.parentNode.className=r.parentNode.parentNode.className.replace(" fyhi",""),r.style.opacity="0"))}else r=document.createElement("div"),i=!1;var s="";if(t.renderer.el.offsetWidth>640&&(s="height:50px;line-height:50px;font-size:18px"),e.parentNode.className.indexOf("amage")>0?r.className="fy_cpt fy_dmg":r.className="fy_cpt",r.innerHTML=n,i)return void(r.style.opacity="1");t.renderer.el.parentNode.appendChild(r),setTimeout(function(){r&&(r.style.cssText="transform:none;opacity:1;"+s,r.parentNode.parentNode.className+=" fyhi")},12);var a="ondisplay",o=5,l=function(e){if(0===--o){if(r){r.parentNode.parentNode.className=r.parentNode.parentNode.className.replace(" fyhi",""),r.style.opacity="0",r.tabIndex=-5;var i=r;setTimeout(function(){i.parentNode&&i.parentNode.removeChild(i)},188),r=null}for(var n=t[a].length;n-- >0;)if(t[a][n]===l){t[a].splice(n,1);break}l=null}};t[a]||(t[a]=[]),t[a].push(l)}}},{key:"showImage",value:function(e){var t=this;if(!t.skipUpdate&&t.onupdate)for(var i=t["onupdate"].length;i-- >0;)t["onupdate"][i](t,e,0);t.skipUpdate=!1;var n=0,r=0,s=function(e){if(0==n)return!1;var i=t.visImgholder,s=i.getBoundingClientRect(),a=t.visImg,o=0,l=0;if(i.offsetWidth>=n)return!1;if(o=e.clientX||(e.touches?e.touches[0].pageX:-1),l=e.clientY||(e.touches?e.touches[0].pageY:-1),o===-1)return!1;o=(e.clientX||e.touches[0].pageX)-s.left,l=(e.clientY||e.touches[0].pageY)-s.top;var u=-(o/i.offsetWidth),h=-(l/i.offsetHeight);u=u.toFixed(3),h=h.toFixed(3),a.style.width=n+"px",a.style.height=r+"px",a.style.cursor="zoom-out",a.style.left=(n-i.offsetWidth)*u+"px",a.style.top=(r-i.offsetHeight)*h+"px"},a="max-width:none;max-height:none;position:absolute;left:0;top:0;transition:all 300ms;width:100%;margin:0 auto;object-fit:contain;height:100%;user-select:none;-webkit-user-drag:none;";this.visImgholder||(this.visImgholder=document.createElement("div"),this.visImg=new Image,this.visImg.id="fyuimg_"+t.id,this.visImgholder.className="fyu_visimg",this.visImgholder.style.cssText="cursor: zoom-in; position: absolute; display: block; left: 0; z-index: 99;                     top: 0; width: 100%; height: 100%;background:rgba(0,0,0,0.72);",this.visImgholder.appendChild(this.visImg),this.renderer.el.appendChild(this.visImgholder)),this.visImg.style.cssText=a,this.visImg.loader=new p["default"](this,(-1),function(e){e.preventDefault(),e.stopPropagation(),t.hideImage()}),this.loader&&this.loader.makeBack(this,null,function(e){t.hideImage(),e.parentNode.removeChild(e)}),this.visImg.loader.el.parentNode.style.display="block",this.visImg.onload=function(e){t.renderer&&(r=t.visImg.naturalHeight,n=t.visImg.naturalWidth)},this.visImg.src=e,this.visImgholder.style.display="block";var o=0,l=!1;setTimeout(function(){return!l&&void(t.visImgholder.onclick=function(e){o?(l=!1,t.visImgholder.onmousemove=null,t.visImg.style.cssText=a):(l=!0,setTimeout(function(){t.visImg.style.transition="none",l=!1},300),t.visImgholder.onmousemove=s,s(e)),o=!o})},50)}},{key:"hideImage",value:function(){this.visImgholder&&(this.visImgholder.onclick=null,this.visImgholder.onmousemove=null,this.visImg.loader.destroy(),this.visImg.loader=null,this.visImgholder.onmousemove=null,this.visImgholder.style.display="none",this.visImg.src="")}},{key:"update",value:function(e,t){if(this.fid!==e){if(e=e.toLowerCase().replace("https://fyu.se/v/",""),e=e.replace("http://fyu.se/v/",""),!this.skipUpdate&&this.onupdate)for(var i=this["onupdate"].length;i-- >0;)this["onupdate"][i](this,e,1);this.skipUpdate=!1;var n,r=this,s=C["default"].get(this.id,e);if(s)C["default"].add(this.id,this.fid,!1,!0),this._updateViewer(s,this.container,this,e);else{n=C["default"].add(this.id,this.fid,this.el,!0);var a=(0,z["default"])("div");a.style.width=this.el.offsetWidth+"px",a.style.height=this.el.offsetHeight+"px",a.style.visibility="hidden",this.el.appendChild(a);var o={zoom:1,preload:1,fullscreen:1,inlineBtn:this.config.inlineBtn,belongs:this.id};t&&Object.assign(o,t),window.FYU&&FYU.add(e,a,o).on("init",function(e){r._updateViewer(a.children[0].children[0],r.container,r,e),e.container=r.container,e.onviewport=!0,fyu.utils.fireEvent(e,"resize")}).tags()}}}},{key:"_updateViewer",value:function(e,t,i,n,r){if(fyu.ui.inFullscreen){for(var s=fyu.ui.fsContainer;s.childNodes.length>0;)s.removeChild(s.childNodes[0]);s.appendChild(e)}else{for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);t.appendChild(e)}if(i.ondidupdate)for(var a=i["ondidupdate"].length;a-- >0;)i["ondidupdate"][a](i,n,r);window.FYU&&window.FYU.resizeAll()}}],[{key:"addViewer",value:function(t,i,n,r){var s=t;if("string"==typeof t&&(s=document.getElementById(t)),s){var a=new e(s,i,n,r);return fyu.entries.push(a),fyu.o[a.id]=a,a}return!1}},{key:"removeViewer",value:function(e){var t=fyu.entries.length;if("string"==typeof e){for(;t-- >0;)if(fyu.entries[t].fid===e)return fyu.entries[t].destroy(),t}else for(;t-- >0;)if(fyu.entries[t]===e)return fyu.entries[t].destroy(),t;return!1}}]),e}();L.renderOnViewport=(0,x.debounce)(function(){var e=fyu.entries.length,t=null;if(e>0)for(var i=!1;0!==e--;)t=fyu.entries[e],t&&(t.onviewport=(0,x.isElementInViewport)(t.el),i||2!==t.onviewport||(i=!0,setTimeout(function(){fyu.MotionHelper&&fyu.MotionHelper.calibrate()},30)),t.config.pauseOutOfViewPort&&(!t.onviewport||t.loadedFull||t.loading?t.onviewport||t.loadedFull||t.loadPaused||(t.loadPaused=!0,t.loading=!1):(t.loadPaused=!1,t.loadFrames())))},101),i["default"]=L},{"../components/fyu-circle-loader":1,"../utils/async-fetch":7,"../utils/dom":8,"../utils/helper-funcs":9,"../utils/history":10,"../utils/utils":14,"./../components/tags":2,"./../controls/controls":3,"./autoplay":15,"./renderer":19,"./viewer-utils":20}],17:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,i){return Math.cos(t)*e*i}function s(e,t,i,n,s,a,o){var l=t.x,u=t.y,h=t.theta,c=t.scale,f=o,d=i/s,p=n/a,m=r(c,h,o),g=Math.sin(h)*c*f;e.setTransform(m,g*d/p,-g*p/d,m,(-.5*m*i+.5*g*n+f*c*l+.5*i)/d,(-.5*g*i-.5*m*n+f*c*u+.5*n)/p)}function a(e,t,i){var n=this.tween.trans,r=this.tween.alpha,a=this.viewer.config.fy.w,o=this.viewer.config.fy.h,u=this.canvasWidth,h=this.canvasHeight,c=this.tween.scale,f=l.identityInterpolate(r,n),d=l.identityInterpolate(1-r,n).inverse(),p="lighter";e.save(),e.clearRect(0,0,u,h),e.globalCompositeOperation=p,s(e,f,a,o,u,h,c),e.globalAlpha=1-r,e.drawImage(t,0,0,u,h),s(e,d,a,o,u,h,c),e.globalAlpha=r,e.drawImage(i,0,0,u,h),e.restore()}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function(){function e(t,i,r,s){n(this,e),this.x=t,this.y=i,this.theta=r,this.scale=s}return o(e,[{key:"inverse",value:function(){var t=Math.cos(this.theta),i=Math.sin(this.theta),n=t*-this.x+i*-this.y,r=-i*-this.x+t*-this.y;return new e(n*this.scale,r*this.scale,(-this.theta),1/this.scale)}}],[{key:"identityInterpolate",value:function(t,i){return new e(t*i.x,t*i.y,t*i.theta,1-t+t*i.scale)}}]),e}();i.readTweenData=function(e,t){if(!e||e.byteLength<64)return!1;var i=new Uint32Array(e,0)[0];if(1!==i)return!1;for(var n=(new Uint32Array(e,4)[0],new Uint32Array(e,8)[0],new Uint32Array(e,12)[0],new Uint32Array(e,16)[0],new Uint32Array(e,20)[0],new Float32Array(e,24)),r=n.length,s=[],a=0;a<r;a+=4)s.push(new l(n[a],n[a+1],n[a+2],n[a+3]));t.renderer.tween.data=s};i.tweenImages=a},{}],18:[function(e,t,i){"use strict";function n(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}Object.defineProperty(i,"__esModule",{value:!0});i.convertDataURIToBinary=function(e){for(var t=window.atob(e),i=t.length,n=new Uint8Array(new ArrayBuffer(i)),r=0;r<i;r++)n[r]=t.charCodeAt(r);return n},i.getResizedTable=function(e,t,i){var n=t*i,r=4*n,s=null;s=window.Uint8ClampedArray?new Uint8ClampedArray(r):new Uint8Array(r);for(var a=18,o=255,l=28,u=-1,h=0,c=0;c<n&&(++u,c%t==0&&c>a&&(++h,c=h*t*a),!(l<=u));c+=a)for(var f=3*u,d=e[f],p=e[f+1],m=e[f+2],g=0,v=0;v<a;++v){g=v*t;for(var y=0;y<a;++y){var w=4*(c+g+y);s[w]=m,s[w+1]=p,s[w+2]=d,s[w+3]=o}}return s},i.stackBlurCanvasRGBA=function(e,t,i,r){var s,a,o,l,u,h,c,f,d,p,m,g,v,y,w,b,x,_,k,T,I,z,F,C,M=e.data,E=r+r+1,O=t-1,R=i-1,L=r+1,A=L*(L+1)/2,S=new n,P=S;for(o=1;o<E;o++)if(P=P.next=new n,o==L)var H=P;P.next=S;var N=null,j=null;c=h=0;var B=271,X=15;for(a=0;a<i;a++){for(b=x=_=k=f=d=p=m=0,g=L*(T=M[h]),v=L*(I=M[h+1]),y=L*(z=M[h+2]),w=L*(F=M[h+3]),f+=A*T,d+=A*I,p+=A*z,m+=A*F,P=S,o=0;o<L;o++)P.r=T,P.g=I,P.b=z,P.a=F,P=P.next;for(o=1;o<L;o++)l=h+((O<o?O:o)<<2),f+=(P.r=T=M[l])*(C=L-o),d+=(P.g=I=M[l+1])*C,p+=(P.b=z=M[l+2])*C,m+=(P.a=F=M[l+3])*C,b+=T,x+=I,_+=z,k+=F,P=P.next;for(N=S,j=H,s=0;s<t;s++)M[h+3]=F=m*B>>X,0!=F?(F=255/F,M[h]=(f*B>>X)*F,M[h+1]=(d*B>>X)*F,M[h+2]=(p*B>>X)*F):M[h]=M[h+1]=M[h+2]=0,f-=g,d-=v,p-=y,m-=w,g-=N.r,v-=N.g,y-=N.b,w-=N.a,l=c+((l=s+r+1)<O?l:O)<<2,b+=N.r=M[l],x+=N.g=M[l+1],_+=N.b=M[l+2],k+=N.a=M[l+3],f+=b,d+=x,p+=_,m+=k,N=N.next,g+=T=j.r,v+=I=j.g,y+=z=j.b,w+=F=j.a,b-=T,x-=I,_-=z,k-=F,j=j.next,h+=4;c+=t}for(s=0;s<t;s++){for(x=_=k=b=d=p=m=f=0,h=s<<2,g=L*(T=M[h]),v=L*(I=M[h+1]),y=L*(z=M[h+2]),w=L*(F=M[h+3]),f+=A*T,d+=A*I,p+=A*z,m+=A*F,P=S,o=0;o<L;o++)P.r=T,P.g=I,P.b=z,P.a=F,P=P.next;for(u=t,o=1;o<=r;o++)h=u+s<<2,f+=(P.r=T=M[h])*(C=L-o),d+=(P.g=I=M[h+1])*C,p+=(P.b=z=M[h+2])*C,m+=(P.a=F=M[h+3])*C,b+=T,x+=I,_+=z,k+=F,P=P.next,o<R&&(u+=t);for(h=s,N=S,j=H,a=0;a<i;a++)l=h<<2,M[l+3]=F=m*B>>X,F>0?(F=255/F,M[l]=(f*B>>X)*F,M[l+1]=(d*B>>X)*F,M[l+2]=(p*B>>X)*F):M[l]=M[l+1]=M[l+2]=0,f-=g,d-=v,p-=y,m-=w,g-=N.r,v-=N.g,y-=N.b,w-=N.a,l=s+((l=a+L)<R?l:R)*t<<2,f+=b+=N.r=M[l],d+=x+=N.g=M[l+1],p+=_+=N.b=M[l+2],m+=k+=N.a=M[l+3],N=N.next,g+=T=j.r,v+=I=j.g,y+=z=j.b,w+=F=j.a,b-=T,x-=I,_-=z,k-=F,j=j.next,h+=t}return e},i.initTransform=function(e,t){e.style.msTransform=t,e.style.webkitTransform=t,e.style.transform=t,e.style.transformOrigin="0 0",e.style.webkitTransformOrigin="0 0",e.style.msTransformOrigin="0 0"},i.createObjectURL=function(e,t){return e.imgdata[t]?URL.createObjectURL(e.imgdata[t]):null}},{}],19:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("../utils/metrics"),o=n(a),l=e("../utils/async-fetch"),u=e("./renderer-utils"),h=e("./renderer-tween"),c=function(){function e(t,i,n,s){r(this,e),this.viewer=t,this.type=i,this.width=n,this.height=s,this.scale_mode=0,this.isPan=!1,this.inFullscreen=!1,this.el=document.createElement("div"),this.el.className="fyu-renderer",this.canvas=null,this.img=null,this.imgTweenSource=null,this.imgTweenTarget=null,this.direction=0,this.ctx=null,this.canvasWidth=null,this.canvasHeight=null,this.trans=[],this.full_width=n,this.full_height=s,this.cover=null,this.scale_mode=0,this.coords={
width:0,height:0,left:0,top:0},this.transform={scale:1,minScale:1,maxScale:t.config.maxzoom?t.config.maxzoom:1.92,scrollLeft:0,scrollTop:0,maxScrollLeft:0,maxScrollTop:0},this.transform.maxScale=960*this.transform.maxScale/this.full_width,this.isAnimated=!1,this.ratio=t.config.fy.ratio,this.hasTweening=t.config.fy.cv<1,this.tween={exists:t.more.tweens&&t.config.isTweened,enabled:!1,sourceFrame:0,targetFrame:0,alpha:0,trans:null,data:null,scale:1.059},this.holder=t.el,this.v_w=this.holder.offsetWidth,this.v_h=this.holder.offsetHeight,this.build(),this.metrics=new o["default"]}return s(e,[{key:"build",value:function(){var e=this;"canvas"===this.type?this._createElements():"canvas_big"===this.type?(this._createElements(),this.scale_mode=1):(this.canvas=this.img=document.createElement("img"),this.canvas.setAttribute("unselectable","on")),this._setDimensions(),this.resize(this.viewer,!1),this.viewer.config.blur&&this.blurCanvas(this.viewer),this._setLoaders(),this.viewer.events.resize.push(function(t,i){e.resize(i,!0)}),this.applyTween=h.tweenImages.bind(this)}},{key:"_createElements",value:function(){this.img=new Image,this.tween.exists&&(this.imgTweenSource=new Image,this.imgTweenTarget=new Image),this.canvas=document.createElement("canvas"),this.canvas.className="fyu-canvas",this.canvas.mozOpaque=!0,this.ctx=this.canvas.getContext("2d",{alpha:!1})}},{key:"_setDimensions",value:function(){var e=this.viewer.config.fy.ratio,t=this.v_w/this.v_h,i=this.holder.offsetWidth,n=this.holder.offsetHeight,r=0,s=0;"canvas"===this.type?this._createElements():"canvas_big"===this.type?(this._createElements(),this.scale_mode=1):(this.canvas=this.img=document.createElement("img"),this.canvas.setAttribute("unselectable","on")),0===this.scale_mode?(this.canvasWidth=this.el.offsetWidth,this.canvasHeight=this.el.offsetHeight,this.viewer.config.aspect&&1===this.viewer.config.aspect.mode&&Math.abs(e-t)<this.viewer.config.aspect.tolerance?t>=e?(s=i/e,r=i):(r=n*e,s=n):t>=e?(r=n*e,s=n):(s=i/e,r=i),this.canvasWidth=r,this.canvasHeight=s):(this.canvasWidth=this.full_width,this.canvasHeight=this.full_height),this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.el.appendChild(this.canvas)}},{key:"resize",value:function(e,t){var i=e.config.fy.ratio,n=e.el,r=n.offsetWidth,s=n.offsetHeight,a=r/s,o=0,l=0,u=0;this.viewer.config.aspect&&1===this.viewer.config.aspect.mode&&Math.abs(i-a)<e.config.aspect.tolerance?a>=i?(l=r/i,u=0):(o=s*i,u=1):a>=i?(o=s*i,u=2):(l=r/i,u=3),this._setCoords(r,s,o,l,u),this._applyCoordsToEl(),this.resetTransform(),this.applyTransform(e),this.canvasWidth?window.requestAnimFrame(this.resizeInner.bind(this,t)):this.resizeInner(t)}},{key:"_setCoords",value:function(e,t,i,n,r){var s,a,o,l,u=function(){return(e<=0?i:e)/2-i/2<<0},h=function(){return t/2-n/2<<0};switch(r){case 0:case 3:s=e,a=n,o=h(),l=0;break;case 1:case 2:s=i,a=t,o=0,l=u()}this.coords.width=s,this.coords.height=a,this.coords.top=o,this.coords.left=l}},{key:"_applyCoordsToEl",value:function(){this.el.style.width=this.coords.width+"px",this.el.style.height=this.coords.height+"px",this.viewer.config.aspect&&"top"===this.viewer.config.aspect.align&&(this.coords.top=0),this.el.style.top=this.coords.top+"px",this.viewer.config.aspect&&"left"===this.viewer.config.aspect.align&&(this.coords.left=0),this.el.style.left=this.coords.left+"px"}},{key:"getTrans",value:function(e){return e=e?e:this.viewer.listeners.pointer.frames.srcId,this.tween.data[e]}},{key:"_setLoaders",value:function(){var e=this;window.URL?this.img.onload=function(){var t=e._getTrsf();(0,u.initTransform)(e.canvas,t),e.worker?e.worker.postMessage(e.img.src):URL.revokeObjectURL(e.img.src),e.img.l=!1,e.tween.exists&&e.tween.data?(e.tween.trans=e.getTrans(),e.applyTween(e.ctx,e.img,e.img)):e.ctx.drawImage(e.img,0,0,e.canvas.width,e.canvas.height)}:(this.viewer.ie=!0,this.img.onload=function(){e.img.l=!1,e.ctx&&e.ctx.drawImage(e.img,0,0,e.canvasWidth,e.canvasHeight)})}},{key:"getElement",value:function(){return this.el}},{key:"_getTrsf",value:function(){var e="",t=void 0;return t=this.full_width>this.full_height?this.el.offsetWidth/this.full_width+.001:this.el.offsetHeight/this.full_height+.001,e="scale("+t+")",this.transform.scale=t,this.transform.minScale=t,e}},{key:"resizeInner",value:function(e){var t=null;this.viewer&&(this.canvas.width===this.el.offsetWidth&&this.canvas.height===this.el.offsetHeight||(0===this.scale_mode?(this.canvasWidth=this.el.offsetWidth,this.canvasHeight=this.el.offsetHeight):(this.canvasWidth=this.full_width,this.canvasHeight=this.full_height,t=this._getTrsf()),this._messOnLoad(t),this.tween.enabled&&(this.tween.alpha=0),this.computeIfHighRes(this.viewer,0),this.transform.scale>this.transform.minScale+.2?this.isPan||(this.isPan=!0,this.viewer.pan(!0)):this.isPan&&(this.isPan=!1,this.viewer.pan(!1)),this.viewer.loaded&&this.visible_frame?this.displayFrame(this.viewer.getFrameIndex(this.visible_frame),!0):!this.coverLoaded&&this.viewer.config.blur?this.blurCanvas(this.viewer):this.coverLoaded&&!this.viewer.loaded&&this.coverImg&&this.ctx&&this.ctx.drawImage(this.coverImg,0,0,this.canvas.width,this.canvas.height)))}},{key:"_messOnLoad",value:function(e){var t=this;this.viewer.ie?this.img.onload=function(){t.img.l=!1,e&&(0,u.initTransform)(t.canvas,e),t.ctx&&t.ctx.drawImage(t.img,0,0,t.canvas.width,t.canvas.height),t._resetOnLoad()}:this.img.onload=function(){t.worker?t.worker.postMessage(t.img.src):URL.revokeObjectURL(t.img.src),e||(0,u.initTransform)(t.canvas,e),t.img.l=!1,t.ctx&&(t.tween.exists&&t.tween.data?(t.tween.trans=t.getTrans(),window.requestAnimFrame(function(){t.applyTween(t.ctx,t.img,t.img)})):t.ctx.drawImage(t.img,0,0,t.canvas.width,t.canvas.height)),t._resetOnLoad()},this.viewer.tagsInstance&&this.viewer.tagsInstance.enabled&&this.viewer.tagsInstance.applyStyle(),!this.coverLoaded&&this.viewer.config.blur&&this.blurCanvas(this.viewer)}},{key:"_resetOnLoad",value:function(){var e=this;this.viewer&&(this.viewer.ie?this.img.onload=function(){e.img.l=!1,e.ctx&&e.ctx.drawImage(e.img,0,0,e.canvas.width,e.canvas.height)}:this.tween.enabled?this._tweenLoaders():this.img.onload=function(){e.worker?e.worker.postMessage(e.img.src):URL.revokeObjectURL(e.img.src),e.img.l=!1,e.tween.exists&&e.tween.data?(e.tween.trans=e.getTrans(),e.applyTween(e.ctx,e.img,e.img)):e.ctx&&e.ctx.drawImage(e.img,0,0,e.canvas.width,e.canvas.height)})}},{key:"_fallbackTween",value:function(e,t){var i=[this._checkSetIndex(e),this._checkSetIndex(t)];return i.filter(function(e){return e})}},{key:"_fallbackDisplay",value:function(e,t){var i=this._fallbackTween(e,t);if(i.length>0){if(1!==i.length)return!1;this.displayFrame(i[0].index)}return!0}},{key:"_checkSetIndex",value:function(e,t){return this.viewer.imgdata[e]?{index:e}:(e&&(this.visible_frame=0|e),!1)}},{key:"displayFrame",value:function(e,t){e=0|e;var i=null,n=this.viewer,e=n.frame_map[e];if(!this._checkSetIndex(e,!0))return!1;if(this.visible_frame===e&&!t)return!1;if(n.config.highRes&&n.config.zoomResolution.length>=n.config.highRes&&!n.imgdata[e].loading&&n.config.highRes>(n.imgdata[e].highres?n.imgdata[e].highres:0)&&(this.asyncFetchDebouncer&&clearTimeout(this.asyncFetchDebouncer),this.asyncFetchDebouncer=setTimeout(function(){l.asyncFetch.start(n),l.asyncFetch.stop(n)},80)),!this.img.l){if(this.img.l=!0,window.URL)if(window.Worker&&navigator.appVersion.indexOf("MSIE 10")===-1){if(!this.worker){window.URL=window.URL||window.webkitURL;var r,s="self.URL = self.URL || self.webkitURL;self.onmessage=function(e){if (!e.data.size) {URL.revokeObjectURL(e.data); return ;} postMessage(URL.createObjectURL(e.data));  }";try{r=new Blob([s],{type:"application/javascript"})}catch(e){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,r=new BlobBuilder,r.append(s),r=r.getBlob()}this.worker=new Worker(URL.createObjectURL(r));var a=this;this.worker.onmessage=function(e){a.img.src=e.data}}this.worker.postMessage(n.imgdata[e])}else i=URL.createObjectURL(n.imgdata[e]),this.img.src=i;else this.img.src=n.imgdata[e].src;if(this.visible_frame=e,n.tagsInstance&&n.tagsInstance.enabled&&n.tagsInstance.display(e),n.ondisplay)for(var o=n["ondisplay"].length;o-- >0;)n["ondisplay"][o](n,e);this.metrics.check(e,n)}return!0}},{key:"tweeningApplied",value:function(e,t,i){return this.tween.sourceFrame===e&&this.tween.targetFrame===t&&this.tween.alpha===i}},{key:"enableTween",value:function(){this.tween.exists&&this.tween.data&&(this.tween.enabled=!0,this._tweenLoaders())}},{key:"_tweenLoaders",value:function(){var e=this;this.imgTweenSource.onload=function(){URL.revokeObjectURL(e.imgTweenSource.src)},this.imgTweenTarget.onload=function(){URL.revokeObjectURL(e.imgTweenTarget.src),e.applyTween(e.ctx,e.imgTweenSource,e.imgTweenTarget)}}},{key:"displayTween",value:function(e,t,i){return!this.tweeningApplied(e,t,i)&&(!this._fallbackDisplay(e,t)&&(t>e?this.tween.trans=this.getTrans(e):this.tween.trans=this.getTrans(t),this.visible_frame=e,this.tween.sourceFrame=e,this.tween.targetFrame=t,this.tween.alpha=i,this.imgTweenSource.src=(0,u.createObjectURL)(this.viewer,e),this.imgTweenTarget.src=(0,u.createObjectURL)(this.viewer,t),this.viewer.tagsInstance&&this.viewer.tagsInstance.enabled&&this.viewer.tagsInstance.display(e),void this.metrics.check(e,this.viewer)))}},{key:"makeCover",value:function(e,t,i){var n=this,r=e.config.resolution?e.config.resolution+"/":"",s=e.path+(e.config.mask?"0s_"+e.config.mask+"/":"")+r+"frames_"+t+".jpg?v=1";this.coverImg=new Image;var a=this._getTrsf();(0,u.initTransform)(this.canvas,a),fyu.utils.fetchImage(s,i,function(i,r,a){var o=window.URL||window.webkitURL;if(n.coverImg.onload=function(){if(n.visible_frame=t,n.coverImg){e.ie||(n.worker?n.worker.postMessage(n.coverImg.src):o&&o.revokeObjectURL(n.coverImg.src)),n.tween.exists&&n.tween.data&&(n.tween.trans=n.getTrans()),n.ctx.globalAlpha=.1,n.ctx.drawImage(n.coverImg,0,0,n.canvas.width,n.canvas.height);for(var i=1;i<=10;++i)setTimeout(function(){n.ctx.globalAlpha+=.1,n.ctx.drawImage(n.coverImg,0,0,n.canvas.width,n.canvas.height)},29*i);setTimeout(function(){n.ctx.globalAlpha=1},500)}n.coverLoaded=!0,n.blurData=null},e.ie)n.coverImg.src=s;else{e.imgdata[t]=i,e.imgdata[t].lowres=!1,e.imgdata[t].thumb=!0;var l=o.createObjectURL(i);n.coverImg.src=l}},function(){n.coverImg.src=s},e.id,!0)}},{key:"destroyCover",value:function(){this.coverLoaded=!0}},{key:"computeIfHighRes",value:function(e,t){if(t=this.transform.scale,e.config.zoomResolution&&e.config.zoomResolution.length>0){var i=this.canvas.width>this.canvas.height?960:960/e.config.fy.ratio>>0;t>.9*i/this.canvasWidth&&t<=1.12*i/this.canvasWidth?(e.config.highRes=1,e.forceRenderHighResFrame()):t>1.12*i/this.canvasWidth&&t<=1.4*i/this.canvasWidth?(e.config.zoomResolution.length>1?e.config.highRes=2:e.config.highRes=1,e.forceRenderHighResFrame()):t>1.4*i/this.canvasWidth?(e.config.zoomResolution.length>2?e.config.highRes=3:e.config.zoomResolution.length>1?e.config.highRes=2:e.config.highRes=1,e.forceRenderHighResFrame()):e.config.highRes=0}}},{key:"zoom",value:function(e,t,i,n,r){var s=1.01,a=Math.pow(s,t),o=this.transform,l=fyu.utils.getOffset(this.el),u=o.scale,h=void 0,c=void 0,f=void 0,d=void 0;if(e.onzoom&&!r)for(var p=e["onzoom"].length;p-- >0;)e["onzoom"][p](e,t,i,n);i?i._x&&i._y?(h=i._x*this.el.offsetWidth,c=i._y*this.el.offsetHeight):(h=i.pageX-l.left,c=i.pageY-l.top):(h=this.el.offsetWidth/2,c=this.el.offsetHeight/2),f=u*a,f=n?Math.max(f,o.minScale):Math.max(Math.min(f,o.maxScale),o.minScale),this.computeIfHighRes(e,f),o.maxScrollLeft=Math.max(this.canvasWidth*f-this.el.offsetWidth,0),o.maxScrollTop=Math.max(this.canvasHeight*f-this.el.offsetHeight,0),d=this.checkBounds({left:(h+o.scrollLeft)*f/u-h,top:(c+o.scrollTop)*f/u-c}),o.scale=f,o.scrollLeft=d.left,o.scrollTop=d.top,f>this.transform.minScale+.2?this.isPan||(this.isPan=!0,this.viewer.pan(!0)):this.isPan&&(this.isPan=!1,this.viewer.pan(!1)),requestAnimFrame(this.applyTransform.bind(this,e))}},{key:"translate",value:function(e,t,i){var n=this.transform,r=this.checkBounds({left:n.scrollLeft-e,top:n.scrollTop-t});n.scrollLeft=r.left,n.scrollTop=r.top,requestAnimFrame(this.applyTransform.bind(this,i))}},{key:"checkBounds",value:function(e){var t=this.transform;return e.left>t.maxScrollLeft?e.left=t.maxScrollLeft:e.left<0&&(e.left=0),e.top>t.maxScrollTop?e.top=t.maxScrollTop:e.top<0&&(e.top=0),e}},{key:"resetTransform",value:function(){var e=this.transform;e.scrollLeft=0,e.scrollTop=0,e.maxScrollLeft=0,e.maxScrollTop=0,this._getTrsf()}},{key:"applyTransform",value:function(e){var t=this.canvas,i=this.transform,n="translate("+-i.scrollLeft+"px,"+-i.scrollTop+"px) scale("+i.scale+")",r=void 0;if(t.style.msTransform=n,t.style.webkitTransform=n,t.style.transform=n,e.tagsInstance&&e.tagsInstance.enabled){var s=this.canvasWidth/(t.width>t.height?960:960/e.config.fy.ratio2>>0),a="translate("+-i.scrollLeft+"px,"+-i.scrollTop+"px) scale("+i.scale*s+")";r=e.tagsInstance.container.style,r.msTransform=a,r.webkitTransform=a,r.transform=a}}},{key:"destroy",value:function(){var e=this.el.parentNode.parentNode;return e&&e.parentNode&&e.parentNode.removeChild(e),this.viewer=null,this.el=null,!1}},{key:"blurCanvas",value:function(e){if(window.Uint8Array&&Object.defineProperty){var t,i,n,r=(this.coords,this.canvasWidth,this.canvasHeight,this.ctx),s=e.config.blur,a=126,o=72;if(0===e.config.fy.m&&(a=72,o=126),Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice}),!this.blurData){if(!window.atob)return;t=(0,u.convertDataURIToBinary)(s),t=t.slice(2),n=(0,u.getResizedTable)(t,a,o);var l=document.createElement("canvas"),h=l.getContext("2d",{alpha:!1});if(l.width=a,l.height=o,i=h.getImageData(0,0,a,o),i.data.set)i.data.set(n);else for(var c=0;c<i.data.length;++c)i.data[c]=n[c];i=(0,u.stackBlurCanvasRGBA)(i,a,o,10),h.putImageData(i,0,0),this.blurData=l}r.clearRect(0,0,this.canvasWidth,this.canvasHeight),r.drawImage(this.blurData,0,0,this.canvasWidth,this.canvasHeight)}}}]),e}();i["default"]=c},{"../utils/async-fetch":7,"../utils/metrics":12,"./renderer-tween":17,"./renderer-utils":18}],20:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.fireViewerEvent=function(e,t,i){if(e&&e.events&&e.events[t])for(var n=e.events[t].length;n-- >0;)e.events[t][n]&&e.events[t][n](i,e)},i.checkOlderBrowers=function(e,t){if(!document.addEventListener){var i=0;try{try{var n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{n.AllowScriptAccess="always"}catch(e){return"6,0,0"}}catch(e){}i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1],i=i.split(",").shift()/1}catch(e){try{navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(i=(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1],i=i.split(",").shift()/1)}catch(e){}}if(i<=15){var r=document.createElement("div");r.cssText="position:absolute;width:100%;height:100%;left:0;top:0",r.innerHTML='<img style="width:128px;height:128px;margin:0 auto;display:block;border:0" src="https://fyu.se/assets/2.0/viewer/ie.png" /><p style="width:80%;max-width:300px;text-align:center;color:#333;margin:0 auto;margin-top:10%">Oops, your browser is sadly unsupported</p>',(void 0).el.appendChild(r)}else{var s=fyu.root_path+"FyuseViewer.swf?id="+t,a=document.createElement("div");a.style.cssText="position:absolute;width:100%;height:100%;left:0;top:0",document.addEventListener?a.innerHTML='<object data="'+s+'&autoplay=1" class="viewer"><param name="allowScriptAccess" value="always"><param name="hasPriority" value="true"><param name="wmode" value="opaque"><param name="movie" value="'+s+'&autoplay=1"></object>':a.innerHTML='<object style="width:100%;height:100%" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" data="'+s+'&autoplay=1" class="viewer"><param name="allowScriptAccess" value="always"> <param name="movie" value="'+s+'&autoplay=1"> <param name="wmode" value="opaque"><param name="hasPriority" value="true"></object>',e.el.appendChild(a)}return e}},i.afterForceRenderFetch=function(e,t,i){if(e==t.renderer.visible_frame)requestAnimFrame(function(){e==t.renderer.visible_frame&&t.renderer.displayFrame(t.getFrameIndex(e),t)});else{if(i)return!1;t.forceRenderHighResFrame(t.renderer.visible_frame)}},i.proceed=function(e){if(e.loaded=!0,e["onload"])for(var t=e["onload"].length;t-- >0;)e["onload"][t]&&e["onload"][t](e),e["onload"][t]=null;if(e.direction){var i=" vert";0!==e.direction.swipeX&&(i=" horiz"),fyu.utils.isMobile&&(i+=" fymob"),e.el.className+=i}e.startVisualization(),fyu.ui.showActions(e),e.el.removeChild(e.ll),delete e.ll,requestAnimFrame(function(){fyu.graveyard[e.id]||e.renderer.destroyCover(e)})},i.getDirection=function(e){var t=e.fy,i=(t.dx,t.dy,t.cv),n=t.fr,r={x:0,y:0};Math.abs(t.dx)>Math.abs(t.dy)?r.x=t.dx>0?1:-1:Math.abs(t.dy)>Math.abs(t.dx)&&(r.y=t.dy>0?1:-1);var s=r.x,a=r.y,o=i>0?-s:s,l=i>0?-a:a;if(n&&(l*=-1,a*=-1),1===t.m)if(1===t.r){var u=-l;l=o,o=u,u=-a,a=s,s=u}else{var u=l;l=-o,o=u,u=a,a=-s,s=u}return{swipeX:o,swipeY:l,gyroX:s,gyroY:a}}},{}]},{},[5]),e.getElementsByTagName("head")[0].appendChild(t)}(document);